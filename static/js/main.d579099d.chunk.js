(this["webpackJsonpfnalign-visualizer"]=this["webpackJsonpfnalign-visualizer"]||[]).push([[0],{60:function(t,e,n){t.exports=n(80)},65:function(t,e,n){},67:function(t,e,n){},71:function(t,e,n){},72:function(t,e,n){},73:function(t,e,n){},77:function(t,e,n){},78:function(t,e,n){},79:function(t,e,n){},80:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(8),s=n.n(i),o=(n(65),n(66),n(67),n(52)),c=n(45),u=n.n(c),l=n(35),h=n(11),d=(n(71),n(6)),f=n(10),y=n(19),m=n(18),p=n(20),g=(n(72),function(t){function e(t){var n;return Object(d.a)(this,e),(n=Object(y.a)(this,Object(m.a)(e).call(this,t))).onFileChange=function(t){var e=t.target.files[0];if(e){var r=new FileReader;r.addEventListener("load",(function(t){var e=!1,r=n.props.store;try{r.load(JSON.parse(t.target.result))}catch(a){e=!0}n.setState({error:e})})),r.readAsBinaryString(e)}},n.state={error:!1},n}return Object(p.a)(e,t),Object(f.a)(e,[{key:"renderError",value:function(){return this.state.error?a.a.createElement("p",{className:"upload-error"},"Erro ao ler o arquivo."):null}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("input",{type:"file",onChange:this.onFileChange}),this.renderError())}}]),e}(a.a.Component)),v=(n(73),Object(h.a)((function(t){var e=t.store;return a.a.createElement("div",{className:"slider-container"},a.a.createElement("input",{type:"range",min:0,max:1,step:5e-4,value:e.threshold,onChange:function(t){return e.threshold=+t.target.value},className:"slider"}),a.a.createElement("input",{type:"number",min:0,max:1,step:"any",value:e.threshold,onChange:function(t){return e.threshold=+t.target.value},className:"slider-text"}))}))),b=Object(h.a)((function(t){var e=t.store,n=t.uiState,r={width:n.sidebarOpen?"550px":"60px"},i={display:n.sidebarOpen?"block":"none"};return a.a.createElement("div",{className:"sidebar-container",style:r},a.a.createElement("div",{className:"sidebar-icon-container"},a.a.createElement("div",{onClick:function(){return n.sidebarOpen=!n.sidebarOpen},className:"siderbar-icon-click-wrapper"},a.a.createElement(l.b,{size:"1.75em",color:"#3F51B5"}))),a.a.createElement("div",{style:i},a.a.createElement("h2",null,"Alignment file"),a.a.createElement(g,{store:e}),a.a.createElement("h2",null,"Scoring method"),a.a.createElement(o.a,{options:e.scoringOptions,onChange:function(t){return e.scoring=t.value}}),a.a.createElement("h2",null,"Score threshold"),a.a.createElement(v,{store:e}),a.a.createElement("h2",null,"Frames"),a.a.createElement(u.a,{items:e.frames,selectedItems:e.sankeyFrames,onChange:function(t){return e.sankeyFrames=t},itemHeight:30,wrapperClassName:"multi-select-wrapper"})))})),k=n(47),O=n(21),w=n(1);function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(n,!0).forEach((function(e){Object(k.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var x=function(){function t(){var e=this;Object(d.a)(this,t),this.alignments=[],this.indices=[],this.LUsByFrame={},this.synsetsByLU={},this.synsetData={},this.scoring=null,this.sankeyFrames=[],this.selectedEdge=[null,null],this.threshold=.1,this.createNode=function(t){return{name:t,inDegree:0,outDegree:0}},this.load=Object(w.d)((function(t){e.fndb=t.db[1],e.language=t.lang[1],e.alignments=t.alignments.map((function(e){var n=[];return e.data.forEach((function(e,r){e.forEach((function(e,a){e>0&&n.push([t.indices[0][r],t.indices[1][a],e])}))})),{type:e.type,desc:e.desc,edges:n}})),e.indices=t.indices,e.LUsByFrame=t.lus,e.synsetsByLU=t.resources.lu_to_syn,e.synsetData=t.resources.syn_data,e.sankeyFrames=[],e.selectedEdge=[null,null]}))}return Object(f.a)(t,[{key:"LUWordNetGraph",value:function(){var t=this.getLUNodes(),e=this.getSynsetObjects(t),n=e.links.filter((function(t){return t.target.frm1LU}));return t.push.apply(t,Object(O.a)(e.nodes.filter((function(t){return t.frm1LU})))),n.forEach((function(t){var e;"frm2LU"===t.source.type&&(e=t.source,t.source=t.target,t.target=e)})),t.forEach((function(t){return t.isReferenceNode="frm1LU"===t.type})),n.forEach((function(t){"frm1LU"===t.source.type&&t.target.isIntersection&&(t.source.isMatchingNode=!0)})),this.computeDegrees(n),{nodes:t,links:n}}},{key:"synsetGraph",value:function(){var t=this.getLUNodes(),e=this.getSynsetObjects(t),n=e.links;t.push.apply(t,Object(O.a)(e.nodes));var r="synset"===this.scoring?function(t){return t.frm1LU}:function(t){return t.frm2LU};return t.forEach((function(t){t.isReferenceNode=r(t),t.isMatchingNode=t.isIntersection})),this.computeDegrees(n),{nodes:t,links:n}}},{key:"getLUNodes",value:function(){var t=this;return(this.LUsByFrame[this.selectedEdge[0]]||[]).map((function(e){return j({type:"frm1LU"},t.createNode(e))})).concat((this.LUsByFrame[this.selectedEdge[1]]||[]).map((function(e){return j({type:"frm2LU"},t.createNode(e))})))}},{key:"getSynsetObjects",value:function(t){var e=this,n=t.map((function(t){return(e.synsetsByLU[t.name]||[]).map((function(e){return{source:t,target:e}}))})).flat(),r={},a=Object(O.a)(new Set(n.map((function(t){return t.target})))).map((function(t){var n=j({type:"synset"},e.createNode(t));return r[t]=n,n}));return n.forEach((function(t){t.target=r[t.target],t.target[t.source.type]=!0})),a.forEach((function(t){return t.isIntersection=t.frm1LU&&t.frm2LU})),{nodes:a,links:n}}},{key:"computeDegrees",value:function(t){t.forEach((function(t){++t.source.outDegree,++t.target.inDegree}))}},{key:"setReferenceNode",value:function(t){switch(this.scoring){case"synset":t.isReferenceNode=t.frm1LU,t.isMatchingNode=t.frm1LU&&t.frm2LU;break;case"synset_inv":t.isReferenceNode=t.frm2LU,t.isMatchingNode=t.frm1LU&&t.frm2LU;break;case"lu_wordnet":t.isReferenceNode="frm1LU"===t.type;break;default:t.isReferenceNode=t.isMatchingNode=!0}}},{key:"data",get:function(){var t=this,e=this.alignments.find((function(e){return e.type===t.scoring}));if(e){var n=e.edges,r=new Set(this.sankeyFrames.map((function(t){return t.id})));return n.filter((function(e){return(r.has(e[0])||r.has(e[1]))&&e[2]>=t.threshold}))}return[]}},{key:"frames",get:function(){return this.indices.flat().sort().map((function(t){return{id:t,label:t}}))}},{key:"scoringOptions",get:function(){return this.alignments.map((function(t){return{value:t.type,label:t.desc}}))}},{key:"graphData",get:function(){return"lu_wordnet"===this.scoring?this.LUWordNetGraph():this.synsetGraph()}},{key:"selectionGraph",get:function(){var t=this,e=function(t){return{name:t,inDegree:0,outDegree:0}},n=(this.LUsByFrame[this.selectedEdge[0]]||[]).map((function(t){return j({type:"frm1LU"},e(t))})).concat((this.LUsByFrame[this.selectedEdge[1]]||[]).map((function(t){return j({type:"frm2LU"},e(t))}))),r=n.map((function(e){return(t.synsetsByLU[e.name]||[]).map((function(t){return{source:e,target:t}}))})).flat(),a={};return n.push.apply(n,Object(O.a)(Object(O.a)(new Set(r.map((function(t){return t.target})))).map((function(t){var n=j({type:"synset"},e(t));return a[t]=n,n})))),r.forEach((function(t){return t.target=a[t.target]})),r.forEach((function(t){return t.target[t.source.type]=!0})),"lu_wordnet"===this.scoring&&(r=r.filter((function(t){return t.target.frm1LU}))),n.forEach((function(e){return t.setReferenceNode(e)})),r.forEach((function(t){++t.source.outDegree,++t.target.inDegree})),{nodes:n,links:r}}}]),t}();Object(w.h)(x,{fndb:w.m,language:w.m,alignments:w.m,indices:w.m,LUsByFrame:w.m,synsetsByLU:w.m,synsetData:w.m,scoring:w.m,sankeyFrames:w.m,selectedEdge:w.m,threshold:w.m,data:w.e,frames:w.e,scoringOptions:w.e,selectionGraph:w.e});var L=x,N=function t(){Object(d.a)(this,t),this.sidebarOpen=!0,this.showAlignmentDetails=!1};Object(w.h)(N,{sidebarOpen:w.m,showAlignmentDetails:w.m});var U=N,B=n(39),D=n.n(B),S=n(23),A=n(85),P=n(9),C={version:"1.1.8",bP:function(){var t,e,n,r,a,i,s,o,c,u,l,h,d,f,y,m,p;function g(t){h=t,t.each((function(){var t=P.d(this),e=g.bars(),n=t.selectAll(".subBars").data(e.subBars).enter().append("g").attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).attr("class","subBars").append("rect").attr("x",v).attr("y",b).attr("width",k).attr("height",O);"undefined"!==typeof l&&n.style("fill",(function(t){return l(t)}));var r=t.selectAll(".edges").data(e.edges).enter().append("path").attr("class","edges").attr("d",(function(t){return t.path})).style("fill-opacity",g.edgeOpacity());"undefined"!==typeof l&&r.style("fill",(function(t){return l(t)})),t.selectAll(".mainBars").data(e.mainBars).enter().append("g").attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).attr("class","mainBars").append("rect").attr("x",v).attr("y",b).attr("width",k).attr("height",O).style("fill-opacity",0)}))}function v(t){return-t.width}function b(t){return-t.height}function k(t){return 2*t.width}function O(t){return 2*t.height}return g.data=function(t){return arguments.length?(u=t,g):u},g.fill=function(t){return arguments.length?(l=t,g):l},g.keyPrimary=function(e){return arguments.length?(t=e,g):"undefined"!==typeof t?t:function(t){return t[0]}},g.sortPrimary=function(t){return arguments.length?(y=t,g):"undefined"!==typeof y?y:P.a},g.keySecondary=function(t){return arguments.length?(e=t,g):"undefined"!==typeof e?e:function(t){return t[1]}},g.sortSecondary=function(t){return arguments.length?(m=t,g):"undefined"!==typeof m?m:P.a},g.value=function(t){return arguments.length?(n=t,g):"undefined"!==typeof n?n:function(t){return t[2]}},g.width=function(t){return arguments.length?(r=t,g):"undefined"!==typeof r?r:400},g.height=function(t){return arguments.length?(a=t,g):"undefined"!==typeof a?a:600},g.barSize=function(t){return arguments.length?(s=t,g):"undefined"!==typeof s?s:35},g.min=function(t){return arguments.length?(o=t,g):"undefined"!==typeof o?o:0},g.orient=function(t){return arguments.length?(i=t,g):"undefined"!==typeof i?i:"vertical"},g.pad=function(t){return arguments.length?(c=t,g):"undefined"!==typeof c?c:0},g.duration=function(t){return arguments.length?(f=t,g):"undefined"!==typeof f?f:500},g.edgeOpacity=function(t){return arguments.length?(d=t,g):"undefined"!==typeof d?d:.4},g.edgeMode=function(t){return arguments.length?(p=t,g):"undefined"!==typeof p?p:"curved"},g.bars=function(t){var e={primary:[],secondary:[]},n={primary:[],secondary:[]},r={primary:g.keyPrimary(),secondary:g.keySecondary()},a=g.orient();return s("primary"),s("secondary"),o("primary"),o("secondary"),function(){var t=g.min()/2;e.primary.forEach((function(e){e.height<t&&(e.height=t)})),e.secondary.forEach((function(e){e.height<t&&(e.height=t)}))}(),{mainBars:e.primary.concat(e.secondary),subBars:n.primary.concat(n.secondary),edges:function(){var t=P.b(n.secondary,(function(t){return t.index})),e=g.edgeMode();return n.primary.map((function(e){var n=t.get(e.index);return{path:"vertical"===a?r(e.x+e.width,e.y+e.height,n.x-n.width,n.y+n.height,n.x-n.width,n.y-n.height,e.x+e.width,e.y-e.height):i(e.x-e.width,e.y+e.height,n.x-n.width,n.y-n.height,n.x+n.width,n.y-n.height,e.x+e.width,e.y+e.height),primary:e.primary,secondary:e.secondary,value:e.value,percent:e.percent}}));function r(t,n,r,a,i,s,o,c){if("straight"===e)return["M",t,",",n,"L",r,",",a,"L",i,",",s,"L",o,",",c,"z"].join("");var u=(t+r)/2,l=(i+o)/2;return["M",t,",",n,"C",u,",",n," ",u,",",a,",",r,",",a,"L",i,",",s,"C",l,",",s," ",l,",",c,",",o,",",c,"z"].join("")}function i(t,n,r,a,i,s,o,c){if("straight"===e)return["M",t,",",n,"L",r,",",a,"L",i,",",s,"L",o,",",c,"z"].join("");var u=(n+a)/2,l=(s+c)/2;return["M",t,",",n,"C",t,",",u," ",r,",",u,",",r,",",a,"L",i,",",s,"C",i,",",l," ",o,",",l,",",o,",",c,"z"].join("")}}()};function i(e,n){return"undefined"===typeof t||t.part===n||r[t.part](e)===t.key}function s(t){function n(e){return i(e,t)?g.value()(e):0}var r=P.c().key("primary"===t?g.keyPrimary():g.keySecondary()).sortKeys("primary"===t?g.sortPrimary():g.sortSecondary()).rollup((function(t){return P.e(t,n)})).entries(g.data()),s=c(r,g.pad(),g.min(),0,"vertical"===a?g.height():g.width()),o=g.barSize();r.forEach((function(n,r){e[t].push({x:"horizontal"===a?(s[r].s+s[r].e)/2:"primary"===t?o/2:g.width()-o/2,y:"vertical"===a?(s[r].s+s[r].e)/2:"primary"===t?o/2:g.height()-o/2,height:"vertical"===a?(s[r].e-s[r].s)/2:o/2,width:"horizontal"===a?(s[r].e-s[r].s)/2:o/2,part:t,key:n.key,value:n.value,percent:s[r].p})}))}function o(t){function r(e){return i(e,t)?g.value()(e):0}var s=P.b(e[t],(function(t){return t.key}));P.c().key("primary"===t?g.keyPrimary():g.keySecondary()).sortKeys("primary"===t?g.sortPrimary():g.sortSecondary()).key("secondary"===t?g.keyPrimary():g.keySecondary()).sortKeys("secondary"===t?g.sortPrimary():g.sortSecondary()).rollup((function(t){return P.e(t,r)})).entries(g.data()).forEach((function(e){var r=s.get(e.key),i=c(e.values,0,0,"vertical"===a?r.y-r.height:r.x-r.width,"vertical"===a?r.y+r.height:r.x+r.width),o=g.barSize();e.values.forEach((function(s,c){n[t].push({x:"vertical"===a?"primary"===t?o/2:g.width()-o/2:(i[c].s+i[c].e)/2,y:"horizontal"===a?"primary"===t?o/2:g.height()-o/2:(i[c].s+i[c].e)/2,height:("vertical"===a?i[c].e-i[c].s:o)/2,width:("horizontal"===a?i[c].e-i[c].s:o)/2,part:t,primary:"primary"===t?e.key:s.key,secondary:"primary"===t?s.key:e.key,value:s.value,percent:i[c].p*r.percent,index:"primary"===t?e.key+"|"+s.key:s.key+"|"+e.key})}))}))}function c(t,e,n,r,a){var i=n/(a-r-2*t.length*e),s=0,o=0,c=P.e(t,(function(t){return t.value}));t.forEach((function(t){t.value<i*c&&(s+=1,o+=t.value)}));var u=c<1e-5?0:(a-r-2*t.length*e-s*n)/(c-o),l=r,h=[];return t.forEach((function(t){var r=t.value*u;h.push({s:l+e+(r<n?.5*(n-r):0),e:l+e+(r<n?.5*(n+r):r),p:c<1e-5?0:t.value/c}),l+=2*e+(r<n?n:r)})),h}},g.update=function(t){u=t;var e=g.bars(),n=g.duration();h.selectAll(".subBars").data(e.subBars).transition().duration(n).attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).select("rect").attr("x",v).attr("y",b).attr("width",k).attr("height",O),h.selectAll(".edges").data(e.edges).transition().duration(n).attr("d",(function(t){return t.path})).style("fill-opacity",g.edgeOpacity()).style("visibility","visible"),h.selectAll(".mainBars").data(e.mainBars).transition().duration(n).attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).select("rect").attr("x",v).attr("y",b).attr("width",k).attr("height",O).style("visibility","hidden")},g.mouseover=function(t){var e=g.bars(t);h.selectAll(".mainBars").filter((function(e){return e.part===t.part&&e.key===t.key})).select("rect").style("stroke-opacity",1),h.selectAll(".subBars").data(e.subBars).transition().duration(g.duration()).attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).select("rect").attr("x",v).attr("y",b).attr("width",k).attr("height",O);var n=h.selectAll(".edges").data(e.edges);n.filter((function(e){return e[t.part]===t.key})).transition().duration(g.duration()).style("fill-opacity",g.edgeOpacity()).style("visibility","visible").attr("d",(function(t){return t.path})),n.filter((function(e){return e[t.part]!==t.key})).transition().duration(g.duration()).style("visibility","hidden").attr("d",(function(t){return t.path})),h.selectAll(".mainBars").data(e.mainBars).transition().duration(g.duration()).attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).select("rect").attr("x",v).attr("y",b).attr("width",k).attr("height",O)},g.mouseout=function(t){var e=g.bars();h.selectAll(".mainBars").filter((function(e){return e.part===t.part&&e.key===t.key})).select("rect").style("stroke-opacity",0),h.selectAll(".subBars").data(e.subBars).transition().duration(g.duration()).attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).select("rect").attr("x",v).attr("y",b).attr("width",k).attr("height",O),h.selectAll(".edges").data(e.edges).transition().duration(g.duration()).style("fill-opacity",g.edgeOpacity()).style("visibility","visible").attr("d",(function(t){return t.path})),h.selectAll(".mainBars").data(e.mainBars).transition().duration(g.duration()).attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).select("rect").attr("x",v).attr("y",b).attr("width",k).attr("height",O)},g}},F=C,M=(n(77),D.a.mark((function(){var t,e;return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=["#3366CC","#DC3912","#FF9900","#109618","#990099","#0099C6"],e=0;case 2:return n.next=5,t[e];case 5:e=++e%t.length,n.next=2;break;case 8:case"end":return n.stop()}}),t)}))),R=Object(h.a)(function(t){function e(){var t,n;Object(d.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(y.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(a)))).svg=null,n.selection=null,n.scoreFormatter=Object(S.a)(".3f"),n.bP=null,n.bPg=null,n}return Object(p.a)(e,t),Object(f.a)(e,[{key:"componentDidMount",value:function(){this.renderSankey()}},{key:"componentDidUpdate",value:function(){this.renderSankey()}},{key:"onBarClick",value:function(t){this.selection&&this.selection.key===t.key?(this.unselect(this.selection),this.selection=null):(this.selection&&this.unselect(this.selection),this.selection=t,this.select(t))}},{key:"onEdgeClick",value:function(t){var e=this.props.store;e.selectedEdge[0]=t.primary,e.selectedEdge[1]=t.secondary,this.props.onAlignmentClick()}},{key:"select",value:function(t){var e=this,n="primary"===t.part?function(e){return t.key===e.primary}:function(e){return t.key===e.secondary};this.bP.mouseover(t),this.bPg.selectAll(".score").filter(n).text((function(t){return e.scoreFormatter(t.value)}))}},{key:"unselect",value:function(t){this.bP.mouseout(t),this.bPg.selectAll(".score").text("")}},{key:"renderSankey",value:function(){var t=this,e=this.props.store,n=M(),r=Object(O.a)(new Set(e.data.map((function(t){return t[0]})))).reduce((function(t,e){return t[e]=n.next().value,t}),{}),a=window.innerHeight-10,i=Object(A.a)(this.svg);i.select("*").remove(),i.attr("width",960).attr("height",a);var s=i.append("g").attr("transform","translate(200,50)");this.bP=F.bP().data(e.data).min(12).pad(1).height(a-200).width(500).fill((function(t){return r[t.primary]})),this.bPg=s.call(this.bP),this.bPg.selectAll(".mainBars").on("click",(function(e){return t.onBarClick(e)})),this.bPg.selectAll(".edges").on("click",(function(e){return t.onEdgeClick(e)})),this.bPg.selectAll(".subBars").filter((function(t){return"secondary"===t.part})).append("text").attr("class","score").attr("x",-58).attr("y",6),this.bPg.selectAll(".mainBars").append("text").attr("class","label").attr("x",(function(t){return"primary"===t.part?-30:30})).attr("y",(function(){return 6})).text((function(t){return t.key})).attr("text-anchor",(function(t){return"primary"===t.part?"end":"start"}))}},{key:"render",value:function(){var t=this,e=this.props.store.data;return a.a.createElement("div",null,e.length>0?a.a.createElement("svg",{ref:function(e){return t.svg=e}}):a.a.createElement("h3",{className:"no-data-text"},"No data to show."))}}]),e}(a.a.Component)),z=n(22),H=(n(78),Object(h.a)(function(t){function e(){var t,n;Object(d.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(y.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(a)))).root=null,n.tooltip=null,n.links=null,n.nodes=null,n.height=null,n.width=null,n.margin=null,n.posRegex=/\.\w{1,3}$/gi,n.scoreFormatter=Object(S.a)(".3f"),n}return Object(p.a)(e,t),Object(f.a)(e,[{key:"componentDidMount",value:function(){this.renderGraph()}},{key:"componentDidUpdate",value:function(){this.renderGraph()}},{key:"getRenderingData",value:function(){var t=this.props.store.graphData,e=Object(z.a)().domain(["frm1LU","synset","frm2LU"]).range([0,this.width]).padding(.3),n=Object(z.a)().domain(t.nodes.filter((function(t){return"frm1LU"===t.type})).sort((function(t,e){return e.outDegree-t.outDegree})).map((function(t){return t.name}))).range([2*this.margin,this.height-2*this.margin]),r=Object(z.a)().domain(t.nodes.filter((function(t){return"frm2LU"===t.type})).sort((function(t,e){return e.outDegree-t.outDegree})).map((function(t){return t.name}))).range([2*this.margin,this.height-2*this.margin]),a=Object(z.a)().domain(t.nodes.filter((function(t){return"synset"===t.type})).sort((function(t,e){return e.inDegree-t.inDegree})).map((function(t){return t.name}))).range([this.margin,this.height-this.margin]),i=e("frm1LU"),s=e("frm2LU"),o=e("synset");return t.nodes.forEach((function(t){"frm1LU"===t.type?(t.x=i,t.y=n(t.name)):"frm2LU"===t.type?(t.x=s,t.y=r(t.name)):(t.x=o,t.y=a(t.name))})),{nodes:t.nodes,links:t.links}}},{key:"lemmaHtml",value:function(t,e){return e?'<span class="synset-lemma highlighted">'.concat(t,"</span>"):'<span class="synset-lemma">'.concat(t,"</span>")}},{key:"onMouseOverSynset",value:function(t){var e=this,n=this.props.store,r=n.synsetData[t.name],a=n.language,i=new Set;this.links.each((function(n){n.target===t&&i.add(n.source.name.replace(e.posRegex,""))})),Object(A.a)("#synset-name").html(t.name),Object(A.a)("#synset-desc").html(r.definition),Object(A.a)("#synset-eng-lemmas").html(r.eng.map((function(t){return e.lemmaHtml(t,i.has(t))})).join(", ")),Object(A.a)("#synset-l2-title").html("".concat(a,":")),Object(A.a)("#synset-l2-lemmas").html(r[a].map((function(t){return e.lemmaHtml(t,i.has(t))})).join(", "));var s=Object(A.a)("#synset-tooltip");s.style("display","block");var o=s.node().getBoundingClientRect(),c=t.y+t.height/2;c=t.y+o.height>window.innerHeight?t.y-t.height-o.height:t.y+t.height/2,s.style("top","".concat(c,"px")).style("left","".concat(t.x+12,"px"))}},{key:"onMouseOverNode",value:function(t){var e=new Set;this.links.filter((function(e){return e.source===t||e.target===t})).each((function(t){e.add(t.source),e.add(t.target)})).attr("opacity",1),this.nodes.filter((function(t){return e.has(t)})).style("font-weight","bold").attr("opacity",1),"synset"===t.type&&this.onMouseOverSynset(t)}},{key:"onMouseOutNode",value:function(){this.links.attr("opacity",.1),this.nodes.style("font-weight","normal").attr("opacity",.75),Object(A.a)("#synset-tooltip").style("display","none")}},{key:"computePath",value:function(t){var e,n=t.source.x,r=t.source.y-t.source.height/4,a=t.target.x,i=t.target.y-t.target.height/4;"frm1LU"===t.source.type||"synset"===t.source.type?(n+=t.source.width+8,a-=12,e=1):(n-=8,a+=t.target.width+16,e=-1);var s=(Math.abs(n-a)-30)/2.5;return"\n\t\t\t\tM ".concat(n,"            ").concat(r,"\n\t\t\t\tL ").concat(n+3*e,"   ").concat(r,"\n\t\t\t\tC ").concat(n+s*e," ").concat(r,", ").concat(a-s*e," ").concat(i,", ").concat(a+15*-e," ").concat(i,"\n\t\t\t\tL ").concat(a,"            ").concat(i,"\n\t\t\t")}},{key:"includeHtml",value:function(t){var e=Object(A.a)(this.root).select("svg"),n=t.nodes.filter((function(t){return t.isMatchingNode})).length,r=t.nodes.filter((function(t){return t.isReferenceNode&&!t.isMatchingNode})).length;e.select("#title").attr("x",this.margin).attr("y",this.height-this.margin/2).attr("class","synset-graph-info").text("Frames: ".concat(this.props.store.selectedEdge[0],", ").concat(this.props.store.selectedEdge[1])),e.select("#stats").attr("x",this.width).attr("y",this.height-this.margin/2).attr("class","synset-graph-info synset-graph-score").html('\n\t\t\t\t\tAlignment score:\n\t\t\t\t\t<tspan class="synset-matches">'.concat(n,'</tspan>\n\t\t\t\t\t\xf7\n\t\t\t\t\t(\n\t\t\t\t\t<tspan class="synset-matches">').concat(n,'</tspan>\n\t\t\t\t\t+\n\t\t\t\t\t<tspan class="synset-references">').concat(r,"</tspan>\n\t\t\t\t\t)\n\t\t\t\t\t= ").concat(this.scoreFormatter(n/(n+r))))}},{key:"renderGraph",value:function(){var t=this;this.height=window.innerHeight-10,this.width=960,this.margin=60;var e=this.getRenderingData(),n=Object(A.a)(this.root).select("svg");n.attr("height",this.height).attr("width",this.width),this.nodes=n.select("#nodes").selectAll("text").data(e.nodes).join("text").text((function(t){return t.name})).each((function(t){var e=this.getBBox();t.width=e.width,t.height=e.height+2})).attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})).attr("class",(function(t){var e="node";return t.isMatchingNode?e+=" match":t.isReferenceNode&&(e+=" ref"),e})).attr("opacity",.75).on("mouseover",(function(e){return t.onMouseOverNode(e)})).on("mouseout",(function(e){return t.onMouseOutNode(e)})),this.links=n.select("#links").selectAll("path").data(e.links).join("path").attr("d",this.computePath).attr("marker-end","url(#arrowhead)").attr("stroke","#555").attr("fill-opacity",0).attr("opacity",.1),this.includeHtml(e)}},{key:"render",value:function(){var t=this,e=this.props.store;return a.a.createElement("div",{ref:function(e){return t.root=e}},a.a.createElement("div",{id:"synset-graph-content"},a.a.createElement("div",{id:"synset-tooltip"},a.a.createElement("div",{className:"synset-lang-title large",id:"synset-name"}),a.a.createElement("div",{id:"synset-desc"}),a.a.createElement("div",{className:"synset-lang-title"},"eng:"),a.a.createElement("div",{id:"synset-eng-lemmas"}),a.a.createElement("div",{className:"synset-lang-title",id:"synset-l2-title"}),a.a.createElement("div",{id:"synset-l2-lemmas"})),e.graphData.nodes.length>0?a.a.createElement("svg",null,a.a.createElement("defs",null,a.a.createElement("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto"},a.a.createElement("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#555"}))),a.a.createElement("g",{id:"nodes"}),a.a.createElement("g",{id:"links"}),a.a.createElement("text",{id:"title"}),a.a.createElement("text",{id:"stats"})):a.a.createElement("h3",{className:"no-data-text"},"No data to show.")))}}]),e}(a.a.Component))),G=(n(79),Object(h.a)(function(t){function e(){return Object(d.a)(this,e),Object(y.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(f.a)(e,[{key:"onBackClick",value:function(){this.props.uiState.showAlignmentDetails=!1}},{key:"render",value:function(){var t=this,e=this.props,n=e.store,r=e.uiState,i="";return i+=r.showAlignmentDetails?"shift":"no-shift",r.sidebarOpen||(i+=" expanded"),a.a.createElement("div",{id:"chart-panel-container",className:i},r.showAlignmentDetails&&a.a.createElement("div",{id:"back-button-container",onClick:function(){return t.onBackClick()}},a.a.createElement(l.a,{size:"1.75em"})),a.a.createElement(R,{store:n,onAlignmentClick:function(){return r.showAlignmentDetails=!0}}),a.a.createElement(H,{store:n}))}}]),e}(a.a.Component))),_=new L,I=new U;var W=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(b,{store:_,uiState:I}),a.a.createElement("div",{className:"app-body"},a.a.createElement(G,{store:_,uiState:I})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[60,1,2]]]);
//# sourceMappingURL=main.d579099d.chunk.js.map