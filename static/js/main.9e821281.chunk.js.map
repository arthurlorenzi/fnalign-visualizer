{"version":3,"sources":["components/AlignmentUpload.js","components/CheckBox.js","components/CheckBoxEnabledInput.js","components/Slider.js","components/Sidebar.js","stores/AligmentStore.js","stores/UiState.js","components/viz.js","components/Sankey.js","components/TranslationGraph.js","components/SynsetGraph.js","ChartPanel.js","App.js","serviceWorker.js","index.js"],"names":["AlignmentUpload","props","onFileChange","event","file","target","files","reader","FileReader","addEventListener","e","error","store","load","JSON","parse","result","exception","console","log","setState","readAsBinaryString","state","this","className","type","onChange","renderError","React","Component","checked","label","CheckBoxEnabledInput","onCheckedChange","enabled","Number","textValue","onInputChange","value","onValueChange","placeholder","min","disabled","observer","max","step","threshold","uiState","style","width","sidebarOpen","display","onClick","size","color","options","scoringOptions","o","selectAlignment","sankeyEdgesMax","Infinity","strictSankeySet","items","frameOptions","selectedItems","sankeyFrames","selected","itemHeight","wrapperClassName","AlignmentStore","alignments","indices","frames","framesByName","synsetsByLU","synsetData","alignment","selectedEdge","vectorsByLU","vectorsId2Word","createNode","x","name","inDegree","outDegree","action","data","key","fndb","db","language","lang","map","a","edges","forEach","row","i","j","push","copy","Object","prototype","hasOwnProperty","call","frame","resources","lu_to_syn","syn_data","lu_vec_nn","id2word","id","find","selectEdge","source","gid","nodes","getLUNodes","inter","getConnectionObjects","links","filter","l","frm1LU","n","swap","isReferenceNode","isIntersection","isMatchingNode","computeDegrees","isReferenceFn","frm2LU","LUs","concat","LUNodes","relationMap","nameFn","s","slice","K","t","Array","isArray","flat","intermediateMap","Set","node","sort","b","counts","frameSet","filterFn","has","pruneEdges","desc","LUWordNetGraph","synsetGraph","LUMuseGraph","decorate","observable","sankeyData","computed","UiState","showAlignmentDetails","viz","version","keyPrimary","keySecondary","height","orient","barSize","pad","fill","g","edgeOpacity","duration","sortPrimary","sortSecondary","edgeMode","bP","_","each","d3","bars","selectAll","subBars","enter","append","attr","d","y","fx","fy","fw","fh","path","mainBars","arguments","length","mb","primary","secondary","_or","calculateMainBars","calculateSubBars","m","floorMainBars","index","eMode","get","edgeVert","edgeHoriz","percent","x1","y1","x2","y2","x3","y3","x4","y4","join","mx1","mx3","my1","my3","calculateEdges","isSelKey","part","v","ps","sortKeys","rollup","entries","bpmap","bsize","p","values","r","ln","lp","ret","update","_data","b1","dur","transition","select","mouseover","newbars","mouseout","colors","Sankey","svg","selection","scoreFormatter","format","bPg","renderSankey","bar","unselect","edge","onAlignmentClick","text","colorGen","colorMap","reduce","res","current","next","window","innerHeight","remove","on","onBarClick","onEdgeClick","ref","TranslationGraph","root","margin","renderGraph","graphData","scalePoint","domain","range","padding","yLU1","yLU2","yInter","frm1LUX","frm2LUX","interX","datum","coef","ccoef","Math","abs","matching","reference","html","getRenderingData","bbox","getBBox","onMouseOverNode","onMouseOutNode","computePath","includeFooter","linked","add","markerWidth","markerHeight","refX","refY","points","SynsetGraph","posRegex","synset","highlighted","replace","definition","lemmaHtml","tooltip","getBoundingClientRect","top","lemma","isHighlighted","ChartPanel","selectableTypes","indexOf","onBackClick","App","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.9e821281.chunk.js","sourcesContent":["import React from 'react';\n\nimport './AlignmentUpload.css';\n\nclass AlignmentUpload extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\terror: false,\n\t\t}\n\t}\n\n\tonFileChange = event => {\n\t\tconst file = event.target.files[0];\n\n\t\tif (file) {\n\t\t\tconst reader = new FileReader();\n\n\t\t\treader.addEventListener('load', e => {\n\t\t\t\tlet error = false;\n\t\t\t\tconst {store} = this.props;\n\t\t\t\ttry {\n\t\t\t\t\tstore.load(JSON.parse(e.target.result));\n\t\t\t\t} catch (exception) {\n\t\t\t\t\tconsole.log(exception);\n\t\t\t\t\terror = true;\n\t\t\t\t}\n\t\t\t\tthis.setState({ error })\n\t\t\t});\n\n\t\t\treader.readAsBinaryString(file);\n\t\t}\n\t}\n\n\trenderError() {\n\t\tconst {error} = this.state;\n\t\treturn error ? <p className=\"upload-error\">Error reading input file.</p> : null;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<input type=\"file\" onChange={this.onFileChange} />\n\t\t\t\t{this.renderError()}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default AlignmentUpload;\n","import React from 'react';\n\nimport './CheckBox.css';\n\nexport default props => {\n\treturn (\n\t\t<div className=\"checkbox-wrapper\">\n\t\t\t<input type=\"checkbox\" onChange={e => props.onChange(e.target.checked)} />\n\t\t\t<span>{props.label}</span>\n\t\t</div>\n\t)\n};","import React from 'react';\n\nimport CheckBox from './CheckBox';\nimport './CheckBoxEnabledInput.css';\n\nclass CheckBoxEnabledInput extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tenabled: false,\n\t\t\ttextValue: \"\",\n\t\t};\n\t}\n\n\tonCheckedChange = checked => {\n\t\tthis.setState({ enabled: checked });\n\t\tthis.props.onCheckedChange(checked, Number(this.state.textValue));\n\t}\n\n\tonInputChange = event => {\n\t\tconst {value} = event.target;\n\t\tthis.setState({ textValue: value });\n\t\tthis.props.onValueChange(Number(value));\n\t}\n\n\trender() {\n\t\tconst {label, placeholder, min} = this.props;\n\t\tconst {enabled, textValue} = this.state;\n\t\t\n\t\treturn (\n\t\t\t<div className=\"checkbox-enable-input-wrapper\">\n\t\t\t\t<CheckBox\n\t\t\t\t\tonChange={this.onCheckedChange}\n\t\t\t\t\tlabel={label}\n\t\t\t\t/>\n\t\t\t\t<div className=\"checkbox-enabled-input-input-wrapper\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tvalue={textValue}\n\t\t\t\t\t\tonChange={this.onInputChange}\n\t\t\t\t\t\tmin={min}\n\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\tdisabled={!enabled}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nexport default CheckBoxEnabledInput;","import React from 'react';\nimport { observer } from 'mobx-react';\n\nimport './Slider.css';\n\nexport default observer(props => {\n\tconst {store} = props;\n\n\treturn (\n\t\t<div className=\"slider-container\">\n\t\t\t<input\n\t\t\t\ttype=\"range\"\n\t\t\t\tmin={0}\n\t\t\t\tmax={1}\n\t\t\t\tstep={0.001}\n\t\t\t\tvalue={store.threshold}\n\t\t\t\tonChange={e => store.threshold = +e.target.value}\n\t\t\t\tclassName=\"slider\" />\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tmin={0}\n\t\t\t\tmax={1}\n\t\t\t\tstep=\"any\"\n\t\t\t\tvalue={store.threshold}\n\t\t\t\tonChange={e => store.threshold = +e.target.value}\n\t\t\t\tclassName=\"slider-text\" />\n\t\t</div>\n\t)\n})","import React from 'react';\nimport Select from 'react-select';\nimport MultiSelect from \"@kenshooui/react-multi-select\";\nimport { FaBars } from 'react-icons/fa';\nimport { observer } from 'mobx-react';\n\nimport './Sidebar.css';\n\nimport AlignmentUpload from './AlignmentUpload';\nimport CheckBox from './CheckBox';\nimport CheckBoxEnabledInput from './CheckBoxEnabledInput';\nimport Slider from './Slider';\n\nexport default observer(props => {\n\tconst {store, uiState} = props;\n\tconst style = { width: uiState.sidebarOpen ? '500px' : '60px' };\n\tconst display = { display: uiState.sidebarOpen ? 'block' : 'none' };\n\n\treturn (\n\t\t<div className=\"sidebar-container\" style={style} >\n\t\t\t<div className=\"sidebar-icon-container\">\n\t\t\t\t<div\n\t\t\t\t\tonClick={() => uiState.sidebarOpen = !uiState.sidebarOpen}\n\t\t\t\t\tclassName=\"siderbar-icon-click-wrapper\"\n\t\t\t\t>\n\t\t\t\t\t<FaBars size=\"1.75em\" color=\"#3F51B5\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style={display} >\n\t\t\t\t<h3 className=\"sidebar-field-label first\">Alignment file</h3>\n\t\t\t\t<AlignmentUpload store={store} />\n\t\t\t\t<div className=\"sidebar-row\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h3 className=\"sidebar-field-label\">Scoring tecnique</h3>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\toptions={store.scoringOptions}\n\t\t\t\t\t\t\tonChange={o => store.selectAlignment(o.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h3 className=\"sidebar-field-label\">Threshold</h3>\n\t\t\t\t\t\t<Slider store={store} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"sidebar-row\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<CheckBoxEnabledInput\n\t\t\t\t\t\t\tonCheckedChange={(checked, value) => store.sankeyEdgesMax = checked ? value : Infinity}\n\t\t\t\t\t\t\tonValueChange={value => store.sankeyEdgesMax = value}\n\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\tlabel=\"Restrict number of connections of each frame:\"\n\t\t\t\t\t\t\tplaceholder=\"Max # of edges for frame\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<CheckBox\n\t\t\t\t\t\tonChange={checked => store.strictSankeySet = checked}\n\t\t\t\t\t\tlabel=\"Show ONLY selected frames\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<h3 className=\"sidebar-field-label\">Frame selection</h3>\n\t\t\t\t<MultiSelect\n\t\t\t\t\titems={store.frameOptions}\t\n\t\t\t\t\tselectedItems={store.sankeyFrames}\n\t\t\t\t\tonChange={selected => store.sankeyFrames = selected}\n\t\t\t\t\titemHeight={30}\n\t\t\t\t\twrapperClassName=\"multi-select-wrapper\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n","import { action, computed, decorate, observable } from 'mobx';\n\nclass AlignmentStore {\n\n\tfndb\n\n\tlanguage\n\n\talignments = []\n\n\tindices = []\n\n\tframes = {}\n\n\tframesByName = {}\n\n\tsynsetsByLU = {}\n\n\tsynsetData = {}\n\n\talignment = null\n\n\tsankeyFrames = []\n\n\tstrictSankeySet = false\n\n\tsankeyEdgesMax = null\n\n\tselectedEdge = [null, null]\n\n\tthreshold = 0.1\n\n\tvectorsByLU = []\n\n\tvectorsId2Word = []\n\n\tget sankeyData() {\n\t\tif (this.alignment) {\n\t\t\tconst {edges} = this.alignment;\n\t\t\tconst frameSet = new Set(this.sankeyFrames.map(x => x.id));\n\t\t\tconst filterFn = this.strictSankeySet\n\t\t\t\t? x => frameSet.has(x[0]) && frameSet.has(x[1]) && x[2] >= this.threshold\n\t\t\t\t: x => (frameSet.has(x[0]) || frameSet.has(x[1])) && x[2] >= this.threshold;\n\n\t\t\tconst filteredEdges = this.pruneEdges(edges.filter(filterFn));\n\n\t\t\treturn filteredEdges\n\t\t\t\t.map(x => [\n\t\t\t\t\tthis.frames[x[0]].name + '.' + this.frames[x[0]].language,\n\t\t\t\t\tthis.frames[x[1]].name + '.' + this.frames[x[1]].language,\n\t\t\t\t\tx[2],\n\t\t\t\t]);\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}\n\n\tget frameOptions() {\n\t\treturn this.indices\n\t\t\t.flat()\n\t\t\t.map(x => ({\n\t\t\t\tid: x,\n\t\t\t\tlabel: this.frames[x].name + '.' + this.frames[x].language\n\t\t\t}))\n\t\t\t.sort((a , b) => (a.label < b.label) ? -1 : (a.label > b.label) ? 1 : 0);\n\t}\n\n\tget scoringOptions() {\n\t\treturn this.alignments.map(x => ({\n\t\t\tvalue: x.id,\n\t\t\tlabel: x.desc,\n\t\t}));\n\t}\n\n\tget graphData() {\n\t\tconsole.log(\"called\")\n\t\tif (!this.alignment)\n\t\t\treturn { nodes: [], links: [] };\n\n\t\tswitch(this.alignment.type) {\n\t\t\tcase 'lu_wordnet':\n\t\t\t\treturn this.LUWordNetGraph();\n\t\t\tcase 'synset':\n\t\t\tcase 'synset_inv':\n\t\t\t\treturn this.synsetGraph();\n\t\t\tcase 'lu_muse':\n\t\t\t\treturn this.LUMuseGraph();\n\t\t\tdefault:\n\t\t\t\treturn { nodes: [], links: [] };\n\t\t}\n\t}\n\n\tLUWordNetGraph() {\n\t\tconst nodes = this.getLUNodes();\n\t\tconst inter = this.getConnectionObjects(nodes, this.synsetsByLU);\n\t\tconst links = inter.links.filter(l => l.target.frm1LU);\n\n\t\tnodes.push(...inter.nodes.filter(n => n.frm1LU));\n\t\tlinks.filter(l => l.source.type === 'frm2LU').forEach(l => {\n\t\t\tlet swap = l.source;\n\t\t\tl.source = l.target;\n\t\t\tl.target = swap;\n\t\t})\n\t\tnodes.forEach(n => n.isReferenceNode = n.type === 'frm1LU');\n\t\tlinks\n\t\t\t.filter(l => (l.source.type === 'frm1LU' && l.target.isIntersection))\n\t\t\t.forEach(l => {\n\t\t\t\tl.source.isMatchingNode = true;\n\t\t\t});\n\t\tthis.computeDegrees(links);\n\n\t\treturn { nodes, links };\n\t}\n\n\tsynsetGraph() {\n\t\tconst nodes = this.getLUNodes();\n\t\tconst inter = this.getConnectionObjects(nodes, this.synsetsByLU);\n\t\tconst links = inter.links;\n\n\t\tnodes.push(...inter.nodes);\n\t\tconst isReferenceFn =\n\t\t\tthis.alignment.type === 'synset'\n\t\t\t\t? n => n.frm1LU\n\t\t\t\t: n => n.frm2LU;\n\t\tnodes.forEach(n => {\n\t\t\tn.isReferenceNode = isReferenceFn(n);\n\t\t\tn.isMatchingNode = n.isIntersection;\n\t\t})\n\t\tthis.computeDegrees(links);\n\n\t\treturn { nodes, links };\n\t}\n\n\tLUMuseGraph() {\n\t\tconst nodes = this.getLUNodes();\n\t\tconst inter = this.getConnectionObjects(nodes, this.vectorsByLU, x => this.vectorsId2Word[x]);\n\t\tconst links = inter.links.filter(l => l.target.frm1LU);\n\n\t\tnodes.push(...inter.nodes.filter(n => n.frm1LU));\n\t\tlinks.filter(l => l.source.type === 'frm2LU').forEach(l => {\n\t\t\tlet swap = l.source;\n\t\t\tl.source = l.target;\n\t\t\tl.target = swap;\n\t\t})\n\t\tnodes.forEach(n => n.isReferenceNode = n.type === 'frm1LU');\n\t\tlinks\n\t\t\t.filter(l => (l.source.type === 'frm1LU' && l.target.isIntersection))\n\t\t\t.forEach(l => {\n\t\t\t\tl.source.isMatchingNode = true;\n\t\t\t});\n\t\tthis.computeDegrees(links);\n\n\t\treturn { nodes, links };\n\t}\n\n\tcreateNode = x => ({ name: x, inDegree: 0, outDegree: 0, });\n\n\tgetLUNodes() {\n\t\tif (this.selectedEdge[0] && this.selectedEdge[1]) {\n\t\t\treturn this.frames[this.selectedEdge[0]].LUs\n\t\t\t\t.map(x => ({ type: 'frm1LU', ...this.createNode(x) }))\n\t\t\t\t.concat(\n\t\t\t\t\tthis.frames[this.selectedEdge[1]].LUs\n\t\t\t\t\t.map(x => ({ type: 'frm2LU', ...this.createNode(x) }))\n\t\t\t\t);\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}\n\n\tgetConnectionObjects(LUNodes, relationMap, nameFn=x=>x) {\n\t\tconst links = LUNodes\n\t\t\t.map(s =>\n\t\t\t\t(relationMap[s.name] || [])\n\t\t\t\t\t.slice(0, this.alignment.K)\n\t\t\t\t\t.filter(t => !Array.isArray(t) || t[0] > this.alignment.threshold)\n\t\t\t\t\t.map(t => ({\n\t\t\t\t\t\tsource: s,\n\t\t\t\t\t\ttarget: Array.isArray(t) ? t[1] : t,\n\t\t\t\t\t}))\n\t\t\t)\n\t\t\t.flat();\n\t\t// Creating node objects for intermediate Nodes\n\t\tconst intermediateMap = {}\n\t\tconst nodes = [...new Set(links.map(l => l.target))]\n\t\t\t\t.map(t => {\n\t\t\t\t\tconst node = {\n\t\t\t\t\t\ttype: 'intermediate',\n\t\t\t\t\t\t...this.createNode(nameFn(t))\n\t\t\t\t\t};\n\t\t\t\t\tintermediateMap[t] = node;\n\t\t\t\t\treturn node;\n\t\t\t\t});\n\t\t// Including references to objects in links\n\t\tlinks.forEach(l => {\n\t\t\tl.target = intermediateMap[l.target];\n\t\t\tl.target[l.source.type] = true;\n\t\t});\n\t\tnodes.forEach(n => n.isIntersection = n.frm1LU && n.frm2LU);\n\n\t\treturn { nodes, links };\n\t}\n\n\tcomputeDegrees(links) {\n\t\tlinks.forEach(l => {\n\t\t\t++l.source.outDegree;\n\t\t\t++l.target.inDegree;\n\t\t});\n\t}\n\n\tpruneEdges(edges) {\n\t\tif (!this.sankeyEdgesMax)\n\t\t\treturn edges;\n\n\t\tedges.sort((a, b) => {\n\t\t\tif (a[0] > b[0]) {\n\t\t\t\treturn -1;\n\t\t\t} else if (a[0] < b[0]) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn a[2] > b[2] ? -1 : a[2] < b[2] ? 1 : 0;\n\t\t\t}\n\t\t});\n\n\t\tconst counts = {};\n\n\t\tedges.forEach(x => counts[x[0]] = 0);\n\n\t\treturn edges.filter(x => {\n\t\t\t++counts[x[0]];\n\t\t\treturn counts[x[0]] <= this.sankeyEdgesMax;\n\t\t});\n\t}\n\n\tload = action(data => {\n\t\tthis.fndb = data.db[1];\n\t\tthis.language = data.lang[1];\n\n\t\tthis.alignments = data.alignments.map(a => {\n\t\t\tconst edges = [];\n\n\t\t\ta.data.forEach((row, i) => {\n\t\t\t\trow.forEach((value, j) => {\n\t\t\t\t\tif (value > 0)\n\t\t\t\t\t\tedges.push([data.indices[0][i], data.indices[1][j], value])\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst copy = { ...a };\n\t\t\tcopy.edges = edges;\n\t\t\tdelete copy.data;\n\n\t\t\treturn copy;\n\t\t});\n\n\t\tthis.framesByName = {};\n\t\tfor (let key in data.frames) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(data.frames, key)) {\n\t\t\t\tlet frame = data.frames[key];\n\t\t\t\tthis.framesByName[frame.name + '.' + frame.language] = frame;\n\t\t\t}\n\t\t}\n\n\t\tthis.indices = data.indices;\n\t\tthis.frames = data.frames;\n\t\tthis.synsetsByLU = data.resources.lu_to_syn;\n\t\tthis.synsetData = data.resources.syn_data;\n\t\tthis.vectorsByLU = data.resources.lu_vec_nn;\n\t\tthis.vectorsId2Word = data.resources.id2word;\n\n\t\t// Resets\n\t\tthis.sankeyFrames = [];\n\t\tthis.selectedEdge = [null, null];\n\t})\n\n\tselectAlignment = action(id => {\n\t\tthis.alignment = this.alignments.find(x => x.id === id);\n\t})\n\n\tselectEdge = action((source, target) => {\n\t\tthis.selectedEdge[0] = this.framesByName[source].gid;\n\t\tthis.selectedEdge[1] = this.framesByName[target].gid;\n\t})\n\n}\n\ndecorate(AlignmentStore, {\n\tfndb: observable,\n\tlanguage: observable,\n\talignments: observable,\n\tindices: observable,\n\tframes: observable,\n\tsynsetsByLU: observable,\n\tsynsetData: observable,\n\talignment: observable,\n\tsankeyFrames: observable,\n\tstrictSankeySet: observable,\n\tsankeyEdgesMax: observable,\n\tselectedEdge: observable,\n\tthreshold: observable,\n\tvectorsByLU: observable,\n\tvectorsId2Word: observable,\n\tsankeyData: computed,\n\tframeOptions: computed,\n\tscoringOptions: computed,\n});\n\nexport default AlignmentStore;","import { decorate, observable } from \"mobx\"\n\nclass UiState {\n\n\tsidebarOpen = true\n\n\tshowAlignmentDetails = false\n\n}\n\ndecorate(UiState, {\n\tsidebarOpen: observable,\n\tshowAlignmentDetails: observable,\n});\n\nexport default UiState;","import * as d3 from 'd3';\n\nvar viz = { version: \"1.1.8\" };\n\nviz.bP = function(){\n\tvar keyPrimary, keySecondary, value\n\t,width, height, orient, barSize, min, pad\n\t,data, fill, g, edgeOpacity, duration\n\t,sortPrimary, sortSecondary, edgeMode\n\t;\n\tfunction bP(_){\n\tg=_;\n\t\t\t_.each(function() {\n\t\t\t\tvar g = d3.select(this);\n\t\tvar bars = bP.bars();\n\t\n\t\tvar s = g.selectAll(\".subBars\")\n\t\t\t\t.data(bars.subBars)\n\t\t\t\t.enter()\n\t\t.append(\"g\")\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t\t\t.attr(\"class\",\"subBars\")\n\t\t\t\t.append(\"rect\")\n\t\t\t\t.attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh);\n\t\t\n\t\t\t\tif(typeof fill !==\"undefined\") s.style(\"fill\", function(d){ return fill(d); });\n\t\t\t\n\t\t\t\tvar e = g.selectAll(\".edges\")\n\t\t\t\t.data(bars.edges)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"path\")\n\t\t\t\t.attr(\"class\",\"edges\")\n\t\t\t\t.attr(\"d\",function(d){ return d.path; })\n\t\t.style(\"fill-opacity\",bP.edgeOpacity());\n\t\t\t\t\n\t\t\t\tif(typeof fill !==\"undefined\") e.style(\"fill\", function(d){ return fill(d); });\n\t\t\n\t\t\t\tg.selectAll(\".mainBars\")\n\t\t\t\t.data(bars.mainBars)\n\t\t\t\t.enter()\n\t\t.append(\"g\")\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t\t\t.attr(\"class\",\"mainBars\")\n\t\t\t\t.append(\"rect\")\n\t\t\t\t.attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh)\n\t\t.style(\"fill-opacity\",0)\n\t\t// .on(\"mouseover\",bP.mouseover)\n\t\t// .on(\"mouseout\",bP.mouseout);\n\t});\n\t}\n\tbP.data = function(_){\n\tif(!arguments.length) return data;\n\tdata = _;\n\treturn bP;\n\t}\n\tbP.fill = function(_){\n\tif(!arguments.length) return fill;\n\tfill = _;\n\treturn bP;\n\t}\n\tbP.keyPrimary = function(_){ \n\tif(!arguments.length) return typeof keyPrimary !== \"undefined\" ? keyPrimary : function(d){ return d[0]; } ;\n\tkeyPrimary = _;\n\treturn bP;\t\t\n\t}\n\tbP.sortPrimary = function(_){ \n\tif(!arguments.length) return typeof sortPrimary !== \"undefined\" ? sortPrimary : d3.ascending ;\n\tsortPrimary = _;\n\treturn bP;\t\t\n\t}\n\tbP.keySecondary = function(_){ \n\tif(!arguments.length) return typeof keySecondary !== \"undefined\" ? keySecondary : function(d){ return d[1]; };\n\tkeySecondary = _;\n\treturn bP;\t\t\n\t}\n\tbP.sortSecondary = function(_){ \n\tif(!arguments.length) return typeof sortSecondary !== \"undefined\" ? sortSecondary : d3.ascending;\n\tsortSecondary = _;\n\treturn bP;\t\t\n\t}\t  \n\tbP.value = function(_){ \n\tif(!arguments.length) return typeof value !== \"undefined\" ? value : function(d){ return d[2]; };\n\tvalue = _;\n\treturn bP;\t\t\n\t}\t  \n\tbP.width = function(_){\n\tif(!arguments.length) return typeof width !== \"undefined\" ? width : 400;\n\twidth = _;\n\treturn bP;\n\t}\n\tbP.height = function(_){\n\tif(!arguments.length) return typeof height !== \"undefined\" ? height : 600;\n\theight = _;\n\treturn bP;\n\t}\n\tbP.barSize = function(_){\n\tif(!arguments.length) return typeof barSize !== \"undefined\" ? barSize : 35;\n\tbarSize = _;\n\treturn bP;\n\t}\n\tbP.min = function(_){\n\tif(!arguments.length) return typeof min !== \"undefined\" ? min : 0;\n\tmin = _;\n\treturn bP;\n\t}\n\tbP.orient = function(_){\n\tif(!arguments.length) return typeof orient !== \"undefined\" ? orient : \"vertical\";\n\torient = _;\n\treturn bP;\n\t}\n\tbP.pad = function(_){\n\tif(!arguments.length) return typeof pad !== \"undefined\" ? pad : 0;\n\tpad = _;\n\treturn bP;\n\t}\n\tbP.duration = function(_){\n\tif(!arguments.length) return typeof duration !== \"undefined\" ? duration : 500;\n\tduration = _;\n\treturn bP;\n\t}\n\tbP.edgeOpacity = function(_){\n\tif(!arguments.length) return typeof edgeOpacity !== \"undefined\" ? edgeOpacity : .4;\n\tedgeOpacity = _;\n\treturn bP;\n\t}\n\tbP.edgeMode = function(_){\n\tif(!arguments.length) return typeof edgeMode !== \"undefined\" ? edgeMode : \"curved\";\n\tedgeMode = _;\n\treturn bP;\n\t}\n\tbP.bars = function(mb){\n\tvar mainBars={primary:[], secondary:[]};\n\tvar subBars= {primary:[], secondary:[]};\n\tvar key ={primary:bP.keyPrimary(), secondary:bP.keySecondary() };\n\tvar _or = bP.orient();\n\t\n\tcalculateMainBars(\"primary\");\n\tcalculateMainBars(\"secondary\");\t\n\tcalculateSubBars(\"primary\");\t\n\tcalculateSubBars(\"secondary\");\n\tfloorMainBars(); // ensure that main bars is atleast of size mi.n\n\t\n\treturn {\n\t\t\tmainBars:mainBars.primary.concat(mainBars.secondary)\n\t\t,subBars:subBars.primary.concat(subBars.secondary)\n\t\t,edges:calculateEdges()\n\t};\n\n\tfunction isSelKey(d, part){ \n\t\treturn (typeof mb === \"undefined\" || mb.part === part) || (key[mb.part](d) === mb.key);\n\t}\n\tfunction floorMainBars(){\n\t\tvar m =bP.min()/2;\n\t\t\n\t\tmainBars.primary.forEach(function(d){\n\t\t\tif(d.height<m) d.height=m;\n\t\t});\n\t\tmainBars.secondary.forEach(function(d){\n\t\t\tif(d.height<m) d.height=m;\n\t\t});\n\t}\n\tfunction calculateMainBars(part){\n\t\t\t;\n\t\tfunction v(d){ return isSelKey(d, part) ? bP.value()(d): 0;};\n\n\t\tvar ps = d3.nest()\n\t\t\t.key(part===\"primary\"? bP.keyPrimary():bP.keySecondary())\n\t\t\t.sortKeys(part===\"primary\"? bP.sortPrimary():bP.sortSecondary())\n\t\t\t.rollup(function(d){ return d3.sum(d,v); })\n\t\t\t.entries(bP.data())\n\t\t;\n\t\t\n\t\tvar bars = bpmap(ps, bP.pad(), bP.min(), 0, _or===\"vertical\" ? bP.height() : bP.width());\n\t\tvar bsize = bP.barSize();\n\t\tps.forEach(function(d,i){ \n\t\t\tmainBars[part].push({\n\t\t\t\t\tx:_or===\"horizontal\"? (bars[i].s+bars[i].e)/2 : (part===\"primary\" ? bsize/2 : bP.width()-bsize/2)\n\t\t\t\t,y:_or===\"vertical\"? (bars[i].s+bars[i].e)/2 : (part===\"primary\" ? bsize/2 : bP.height()-bsize/2)\n\t\t\t\t,height:_or===\"vertical\"? (bars[i].e - bars[i].s)/2 : bsize/2\n\t\t\t\t,width: _or===\"horizontal\"? (bars[i].e - bars[i].s)/2 : bsize/2\n\t\t\t\t,part:part\n\t\t\t\t,key:d.key\n\t\t\t\t,value:d.value\n\t\t\t\t,percent:bars[i].p\n\t\t\t});\n\t\t});\n\t}\n\tfunction calculateSubBars(part){\n\t\tfunction v(d){ return isSelKey(d, part) ? bP.value()(d): 0;};\n\t\t\t\t\n\t\tvar map = d3.map(mainBars[part], function(d){ return d.key});\n\t\t\n\t\tvar ps = d3.nest()\n\t\t\t.key(part===\"primary\"? bP.keyPrimary():bP.keySecondary())\n\t\t\t.sortKeys(part===\"primary\"? bP.sortPrimary():bP.sortSecondary())\n\t\t\t.key(part===\"secondary\"? bP.keyPrimary():bP.keySecondary())\n\t\t\t.sortKeys(part===\"secondary\"? bP.sortPrimary():bP.sortSecondary())\n\t\t\t.rollup(function(d){ return d3.sum(d,v); })\n\t\t\t.entries(bP.data());\n\n\t\tps.forEach(function(d){ \n\t\t\tvar g= map.get(d.key); \n\t\t\tvar bars = bpmap(d.values, 0, 0\n\t\t\t\t\t,_or===\"vertical\" ? g.y-g.height : g.x-g.width\n\t\t\t\t\t,_or===\"vertical\" ? g.y+g.height : g.x+g.width);\n\n\t\t\tvar bsize = bP.barSize();\t\t\t\n\t\t\td.values.forEach(function(t,i){ \n\t\t\t\tsubBars[part].push({\n\t\t\t\t\t\tx:_or===\"vertical\"? part===\"primary\" ? bsize/2 : bP.width()-bsize/2 : (bars[i].s+bars[i].e)/2\n\t\t\t\t\t,y:_or===\"horizontal\"? part===\"primary\" ? bsize/2 : bP.height()-bsize/2 : (bars[i].s+bars[i].e)/2\n\t\t\t\t\t,height:(_or===\"vertical\"? bars[i].e - bars[i].s : bsize)/2\n\t\t\t\t\t,width: (_or===\"horizontal\"? bars[i].e - bars[i].s : bsize)/2\n\t\t\t\t\t,part:part\n\t\t\t\t\t,primary:part===\"primary\"? d.key : t.key\n\t\t\t\t\t,secondary:part===\"primary\"? t.key : d.key\t\n\t\t\t\t\t,value:t.value\n\t\t\t\t\t,percent:bars[i].p*g.percent\n\t\t\t\t\t,index: part===\"primary\"? d.key+\"|\"+t.key : t.key+\"|\"+d.key //index \n\t\t\t\t});\n\t\t\t});\t\t  \n\t\t});\n\t}\n\tfunction calculateEdges(){\t\n\t\tvar map=d3.map(subBars.secondary,function(d){ return d.index;});\n\t\tvar eMode= bP.edgeMode();\n\t\t\n\t\treturn subBars.primary.map(function(d){\n\t\t\tvar g=map.get(d.index);\n\t\t\treturn {\n\t\t\t\t\tpath:_or === \"vertical\" \n\t\t\t\t\t? edgeVert(d.x+d.width,d.y+d.height,g.x-g.width,g.y+g.height,g.x-g.width,g.y-g.height,d.x+d.width,d.y-d.height)\n\t\t\t\t\t: edgeHoriz(d.x-d.width,d.y+d.height,g.x-g.width,g.y-g.height,g.x+g.width,g.y-g.height,d.x+d.width,d.y+d.height)\n\t\t\t\t,primary:d.primary\n\t\t\t\t,secondary:d.secondary\n\t\t\t\t,value:d.value\n\t\t\t\t,percent:d.percent\n\t\t\t}\n\t\t});\n\t\tfunction edgeVert(x1,y1,x2,y2,x3,y3,x4,y4){\n\t\t\tif(eMode===\"straight\") return [\"M\",x1,\",\",y1,\"L\",x2,\",\",y2,\"L\",x3,\",\",y3,\"L\",x4,\",\",y4,\"z\"].join(\"\")\n\t\t\tvar mx1=(x1+x2)/2,mx3=(x3+x4)/2;\n\t\t\treturn [\"M\",x1,\",\",y1,\"C\",mx1,\",\",y1,\" \",mx1,\",\",y2,\",\",x2,\",\",y2,\"L\"\n\t\t\t\t\t,x3,\",\",y3,\"C\",mx3,\",\",y3,\" \",mx3,\",\",y4,\",\",x4,\",\",y4,\"z\"].join(\"\");\n\t\t}\n\t\tfunction edgeHoriz(x1,y1,x2,y2,x3,y3,x4,y4){\n\t\t\tif(eMode===\"straight\") return [\"M\",x1,\",\",y1,\"L\",x2,\",\",y2,\"L\",x3,\",\",y3,\"L\",x4,\",\",y4,\"z\"].join(\"\")\n\t\t\tvar my1=(y1+y2)/2,my3=(y3+y4)/2;\n\t\t\treturn [\"M\",x1,\",\",y1,\"C\",x1,\",\",my1,\" \",x2,\",\",my1,\",\",x2,\",\",y2,\"L\"\n\t\t\t\t\t,x3,\",\",y3,\"C\",x3,\",\",my3,\" \",x4,\",\",my3,\",\",x4,\",\",y4,\"z\"].join(\"\");\n\t\t}\n\t}\n\tfunction bpmap(a/*array*/, p/*pad*/, m/*min*/, s/*start*/, e/*end*/){\n\t\tvar r = m/(e-s-2*a.length*p); // cut-off for ratios\n\t\tvar ln =0, lp=0, t=d3.sum(a,function(d){ return d.value;}); // left over count and percent.\n\t\ta.forEach(function(d){ if(d.value < r*t ){ ln+=1; lp+=d.value; }})\n\t\tvar o= t < 1e-5 ? 0:(e-s-2*a.length*p-ln*m)/(t-lp); // scaling factor for percent.\n\t\tvar b=s, ret=[];\n\t\ta.forEach(function(d){ \n\t\t\tvar v =d.value*o; \n\t\t\tret.push({\n\t\t\t\t\ts:b+p+(v<m?.5*(m-v): 0)\n\t\t\t\t,e:b+p+(v<m? .5*(m+v):v)\n\t\t\t\t,p:t < 1e-5? 0:d.value/t\n\t\t\t}); \n\t\t\tb+=2*p+(v<m? m:v); \n\t\t});\n\t\t\n\t\treturn ret;\n\t}\t  \n\t}\t  \n\tbP.update = function(_data){\n\t\tdata = _data;\n\tvar b1 = bP.bars();\n\tvar dur = bP.duration();\n\t\n\tg.selectAll(\".subBars\").data(b1.subBars).transition().duration(dur)\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t\t\t.select(\"rect\")\n\t\t\t\t.attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh);\n\t\t\t\t\t\t\n\t\t\tg.selectAll(\".edges\").data(b1.edges).transition().duration(dur)\n\t\t\t\t.attr(\"d\",function(d){ return d.path; })\n\t\t.style(\"fill-opacity\",bP.edgeOpacity())\n\t\t.style(\"visibility\", \"visible\")\n\t\t\t\t\t\n\t\t\tg.selectAll(\".mainBars\").data(b1.mainBars).transition().duration(dur)\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t\t\t.select(\"rect\")\n\t\t\t\t.attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh)\n\t\t// .style(\"fill-opacity\",0)\n\t\t.style(\"visibility\", \"hidden\")\n\t}\n\tbP.mouseover = function(d){\n\t\tvar newbars = bP.bars(d);\n\t\tg.selectAll(\".mainBars\").filter(function(r){ return r.part===d.part && r.key === d.key})\n\t\t.select(\"rect\").style(\"stroke-opacity\", 1);\n\t\t\n\t\tg.selectAll(\".subBars\").data(newbars.subBars)\n\t\t.transition().duration(bP.duration())\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t.select(\"rect\").attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh);\n\t\t\n\t\tvar e = g.selectAll(\".edges\")\n\t\t.data(newbars.edges);\n\t\t\n\t\te.filter(function(t){ return t[d.part] === d.key;})\n\t\t.transition().duration(bP.duration())\n\t\t.style(\"fill-opacity\",bP.edgeOpacity())\n\t\t.style(\"visibility\", \"visible\")\n\n\t\t.attr(\"d\",function(d){ return d.path});\t\n\t\t\n\t\te.filter(function(t){ return t[d.part] !== d.key;})\n\t\t.transition().duration(bP.duration())\n\t\t// .style(\"fill-opacity\",0)\n\t\t.style(\"visibility\", \"hidden\")\n\t\t.attr(\"d\",function(d){ return d.path});\t\n\t\t\n\t\tg.selectAll(\".mainBars\").data(newbars.mainBars)\n\t\t.transition().duration(bP.duration())\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t.select(\"rect\").attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh)\n\t}\n\tbP.mouseout = function(d){\n\t\tvar newbars = bP.bars();\n\t\t\t\t\t\n\t\tg.selectAll(\".mainBars\").filter(function(r){ return r.part===d.part && r.key === d.key})\n\t\t.select(\"rect\").style(\"stroke-opacity\", 0);\n\t\t\n\t\tg.selectAll(\".subBars\").data(newbars.subBars)\n\t\t.transition().duration(bP.duration())\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t.select(\"rect\").attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh);\n\t\t\n\t\tg.selectAll(\".edges\").data(newbars.edges)\n\t\t.transition().duration(bP.duration())\n\t\t.style(\"fill-opacity\",bP.edgeOpacity())\n\t\t.style(\"visibility\", \"visible\")\n\t\t.attr(\"d\",function(d){ return d.path});\t\n\t\t\n\t\tg.selectAll(\".mainBars\").data(newbars.mainBars)\n\t\t.transition().duration(bP.duration())\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t.select(\"rect\").attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh);\n\t}\n\tfunction fx(d){ return -d.width}\n\tfunction fy(d){ return -d.height}\n\t\tfunction fw(d){ return 2*d.width}\n\t\tfunction fh(d){ return 2*d.height}\n\t\n\treturn bP;\n}\t\n\nexport default viz;\n","import React from 'react';\nimport { format } from 'd3-format';\nimport { select } from 'd3-selection';\nimport { observer } from 'mobx-react';\n// TODO: Should redo this d3 layout (it's kinda bad!)\nimport viz from './viz.js';\n\nimport './Sankey.css';\n\nconst colors = function*() {\n\tconst colors = [\n\t\t\"#3366CC\",\n\t\t\"#DC3912\",\n\t\t\"#FF9900\",\n\t\t\"#109618\",\n\t\t\"#990099\",\n\t\t\"#0099C6\"\n\t];\n\tlet index = 0;\n\n\twhile(true) {\n\t\tyield colors[index];\n\t\tindex = ++index % colors.length;\n\t}\n};\n\nconst Sankey = observer(\n\tclass Sankey extends React.Component {\n\n\t\tsvg = null\n\n\t\tselection = null\n\n\t\tscoreFormatter = format(\".3f\")\n\n\t\tbP = null\n\n\t\tbPg = null\n\n\t\tcomponentDidMount() {\n\t\t\tthis.renderSankey();\n\t\t}\n\n\t\tcomponentDidUpdate() {\n\t\t\tthis.renderSankey();\n\t\t}\n\n\t\tonBarClick(bar) {\n\t\t\tif (this.selection && this.selection.key === bar.key) {\n\t\t\t\tthis.unselect(this.selection);\n\t\t\t\tthis.selection = null;\n\t\t\t} else {\n\t\t\t\tif (this.selection) {\n\t\t\t\t\tthis.unselect(this.selection);\n\t\t\t\t}\n\t\t\t\tthis.selection = bar;\n\t\t\t\tthis.select(bar);\n\t\t\t}\n\t\t}\n\n\t\tonEdgeClick(edge) {\n\t\t\tconst {store} = this.props;\n\n\t\t\tstore.selectEdge(edge.primary, edge.secondary);\n\t\t\tthis.props.onAlignmentClick();\n\t\t}\n\n\t\tselect(bar) {\n\t\t\tconst filterFn =\n\t\t\t\tbar.part === \"primary\"\n\t\t\t\t\t? (d => bar.key === d.primary)\n\t\t\t\t\t: (d => bar.key === d.secondary);\n\n\t\t\tthis.bP.mouseover(bar);\n\t\t\tthis.bPg.selectAll(\".score\")\n\t\t\t\t.filter(filterFn)\n\t\t\t\t.text(d => this.scoreFormatter(d.value))\n\t\t}\n\n\t\tunselect(bar) {\n\t\t\tthis.bP.mouseout(bar);\n\t\t\tthis.bPg.selectAll(\".score\").text(\"\");\n\t\t}\n\n\t\trenderSankey() {\n\t\t\tconst {store} = this.props;\n\t\t\tconst colorGen = colors();\n\t\t\tconst colorMap =\n\t\t\t\t[...new Set(store.sankeyData.map(x => x[0]))]\n\t\t\t\t\t.reduce((res, current) => {\n\t\t\t\t\t\tres[current] = colorGen.next().value;\n\t\t\t\t\t\treturn res;\n\t\t\t\t\t}, {});\n\t\t\tconst height = window.innerHeight-10;\n\t\t\tconst width = 960;\n\t\t\tconst svg = select(this.svg);\n\n\t\t\tsvg.select(\"*\").remove();\n\t\t\tsvg.attr(\"width\", width).attr(\"height\", height);\n\n\t\t\tconst g = svg.append(\"g\").attr(\"transform\",\"translate(200,50)\");\n\t\t\t\n\t\t\tthis.bP =\n\t\t\t\tviz.bP()\n\t\t\t\t\t.data(store.sankeyData)\n\t\t\t\t\t.min(12)\n\t\t\t\t\t.pad(1)\n\t\t\t\t\t.height(height-200)\n\t\t\t\t\t.width(500)\n\t\t\t\t\t.fill(d => colorMap[d.primary])\n\t\t\t\n\t\t\tthis.bPg = g.call(this.bP);\n\n\t\t\tthis.bPg.selectAll(\".mainBars\")\n\t\t\t\t.on(\"click\", d => this.onBarClick(d));\n\t\t\t\n\t\t\tthis.bPg.selectAll(\".edges\")\n\t\t\t\t.on(\"click\", d => this.onEdgeClick(d));\n\n\t\t\t\tthis.bPg.selectAll(\".subBars\")\n\t\t\t\t.filter(d => d.part === \"secondary\")\n\t\t\t\t.append(\"text\")\n\t\t\t\t\t.attr(\"class\", \"score\")\n\t\t\t\t\t.attr(\"x\", -58)\n\t\t\t\t\t.attr(\"y\", 6)\n\t\t\t\n\t\t\tthis.bPg.selectAll(\".mainBars\")\n\t\t\t\t.append(\"text\")\n\t\t\t\t\t.attr(\"class\",\"label\")\n\t\t\t\t\t.attr(\"x\", d => (d.part === \"primary\" ? -30 : 30))\n\t\t\t\t\t.attr(\"y\", () => 6)\n\t\t\t\t\t.text(d => d.key)\n\t\t\t\t\t.attr(\"text-anchor\", d => (d.part === \"primary\" ? \"end\": \"start\"));\n\t\t}\n\n\t\trender() {\n\t\t\tconst data = this.props.store.sankeyData;\n\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t{\n\t\t\t\t\t\tdata.length > 0\n\t\t\t\t\t\t? <svg ref={node => this.svg = node}></svg>\n\t\t\t\t\t\t: <h3 className=\"no-data-text\">No data to show.</h3>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\t}\n);\n\nexport default Sankey;","import React from 'react';\nimport {observer} from 'mobx-react';\nimport {format} from 'd3-format';\nimport {select} from 'd3-selection';\nimport {scalePoint} from 'd3-scale';\n\nimport './TranslationGraph.css';\n\nconst TranslationGraph = observer(\n\tclass TranslationGraph extends React.Component {\n\n\t\troot = null\n\n\t\tlinks = null\n\n\t\tnodes = null\n\n\t\theight = null\n\t\t\n\t\twidth = null\n\n\t\tmargin = null\n\n\t\tscoreFormatter = format(\".3f\")\n\n\t\tcomponentDidMount() {\n\t\t\tthis.renderGraph();\n\t\t}\n\n\t\tcomponentDidUpdate() {\n\t\t\tthis.renderGraph();\n\t\t}\n\n\t\tgetRenderingData() {\n\t\t\tconst {store} = this.props;\n\t\t\tconst data = store.graphData;\n\t\t\t\n\t\t\tconst x =\n\t\t\t\tscalePoint()\n\t\t\t\t\t.domain(['frm1LU', 'intermediate', 'frm2LU'])\n\t\t\t\t\t.range([0, this.width])\n\t\t\t\t\t.padding(.3)\n\n\t\t\tconst yLU1 = scalePoint()\n\t\t\t\t.domain(data.nodes\n\t\t\t\t\t.filter(d => d.type === 'frm1LU')\n\t\t\t\t\t.sort((a, b) => b.outDegree - a.outDegree)\n\t\t\t\t\t.map(d => d.name))\n\t\t\t\t.range([this.margin*2, this.height-(this.margin*2)]);\n\n\t\t\tconst yLU2 = scalePoint()\n\t\t\t\t.domain(data.nodes\n\t\t\t\t\t\t.filter(d => d.type === 'frm2LU')\n\t\t\t\t\t\t.sort((a,b) => b.outDegree - a.outDegree)\n\t\t\t\t\t\t.map(d => d.name))\n\t\t\t\t.range([this.margin*2, this.height-(this.margin*2)]);\n\n\t\t\tconst yInter = scalePoint()\n\t\t\t\t.domain(data.nodes\n\t\t\t\t\t.filter(d => d.type === 'intermediate')\n\t\t\t\t\t.sort((a, b) => b.inDegree - a.inDegree)\n\t\t\t\t\t.map(d => d.name))\n\t\t\t\t.range([this.margin, this.height-this.margin]);\n\n\t\t\tconst frm1LUX = x('frm1LU');\n\t\t\tconst frm2LUX = x('frm2LU');\n\t\t\tconst interX = x('intermediate');\n\n\t\t\tdata.nodes.forEach(d => {\n\t\t\t\tif (d.type === 'frm1LU') {\n\t\t\t\t\td.x = frm1LUX;\n\t\t\t\t\td.y = yLU1(d.name);\n\t\t\t\t} else if (d.type === 'frm2LU') {\n\t\t\t\t\td.x = frm2LUX;\n\t\t\t\t\td.y = yLU2(d.name);\n\t\t\t\t} else {\n\t\t\t\t\td.x = interX;\n\t\t\t\t\td.y = yInter(d.name);\n\t\t\t\t}\n\t\t\t})\n\n\t\t\treturn {\n\t\t\t\tnodes: data.nodes,\n\t\t\t\tlinks: data.links\n\t\t\t}\n\t\t}\n\n\t\tcomputePath(datum) {\n\t\t\tlet coef;\n\t\t\tlet x1 = datum.source.x;\n\t\t\tlet y1 = datum.source.y - (datum.source.height/4);\n\t\t\tlet x2 = datum.target.x;\n\t\t\tlet y2 = datum.target.y - (datum.target.height/4);\n\n\t\t\tif (datum.source.type === 'frm1LU' || datum.source.type === 'intermediate') {\n\t\t\t\tx1 += datum.source.width + 12;\n\t\t\t\tx2 -= 12;\n\t\t\t\tcoef = 1;\n\t\t\t} else {\n\t\t\t\tx1 -= 12;\n\t\t\t\tx2 += datum.target.width + 16;\n\t\t\t\tcoef = -1;\n\t\t\t}\n\n\t\t\tconst offset = 15;\n\t\t\tconst ccoef = (Math.abs(x1 - x2)-2*offset)/2.5;\n\n\t\t\treturn `\n\t\t\t\tM ${x1}            ${y1}\n\t\t\t\tL ${x1 + 3*coef}   ${y1}\n\t\t\t\tC ${x1+ccoef*coef} ${y1}, ${x2-ccoef*coef} ${y2}, ${x2+offset*-coef} ${y2}\n\t\t\t\tL ${x2}            ${y2}\n\t\t\t`;\n\t\t}\n\n\t\tincludeFooter(data) {\n\t\t\tconst svg = select(this.root).select(\"svg\");\n\t\t\tconst matching = data.nodes.filter(d => d.isMatchingNode).length;\n\t\t\tconst reference = data.nodes.filter(d => d.isReferenceNode && !d.isMatchingNode).length;\n\n\t\t\tsvg.select(\"#title\")\n\t\t\t\t.attr(\"x\", this.margin)\n\t\t\t\t.attr(\"y\", this.height-this.margin/2)\n\t\t\t\t.attr(\"class\", \"graph-info\")\n\t\t\t\t.text(`Frames: ${this.props.store.selectedEdge[0]}, ${this.props.store.selectedEdge[1]}`)\n\n\t\t\tsvg.select(\"#stats\")\n\t\t\t\t.attr(\"x\", this.width)\n\t\t\t\t.attr(\"y\", this.height-this.margin/2)\n\t\t\t\t.attr(\"class\", \"graph-info graph-score\")\n\t\t\t\t.html(`\n\t\t\t\t\tAlignment score:\n\t\t\t\t\t<tspan class=\"match\">${matching}</tspan>\n\t\t\t\t\t÷\n\t\t\t\t\t(\n\t\t\t\t\t<tspan class=\"match\">${matching}</tspan>\n\t\t\t\t\t+\n\t\t\t\t\t<tspan class=\"reference\">${reference}</tspan>\n\t\t\t\t\t)\n\t\t\t\t\t= ${this.scoreFormatter(matching/(matching + reference))}`)\n\t\t}\n\n\n\t\trenderGraph() {\n\t\t\tthis.height = window.innerHeight-10;\n\t\t\tthis.width = 960;\n\t\t\tthis.margin = 60;\n\n\t\t\tconst data = this.getRenderingData();\n\t\t\tconst svg = select(this.root).select(\"svg\");\n\n\t\t\tsvg\n\t\t\t\t.attr(\"height\", this.height)\n\t\t\t\t.attr(\"width\", this.width);\n\n\t\t\tthis.nodes = svg.select(\"#nodes\")\n\t\t\t\t.selectAll(\"text\")\n\t\t\t\t.data(data.nodes)\n\t\t\t\t.join(\"text\")\n\t\t\t\t\t.text(d => d.name)\n\t\t\t\t\t.each(function(d) {\n\t\t\t\t\t\tconst bbox = this.getBBox();\n\t\t\t\t\t\td.width = bbox.width;\n\t\t\t\t\t\td.height = bbox.height + 2;\n\t\t\t\t\t})\n\t\t\t\t\t.attr(\"x\", d => d.x)\n\t\t\t\t\t.attr(\"y\", d => d.y)\n\t\t\t\t\t.attr(\"class\", d => {\n\t\t\t\t\t\tlet name = \"node\";\n\t\t\t\t\t\tif (d.isMatchingNode) {\n\t\t\t\t\t\t\tname += \" match\";\n\t\t\t\t\t\t} else if (d.isReferenceNode) {\n\t\t\t\t\t\t\tname += \" ref\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn name;\n\t\t\t\t\t})\n\t\t\t\t\t.attr(\"opacity\", 0.75)\n\t\t\t\t\t.on(\"mouseover\", d => this.onMouseOverNode(d))\n\t\t\t\t\t.on(\"mouseout\", d => this.onMouseOutNode(d))\n\n\t\t\tthis.links = svg.select(\"#links\")\n\t\t\t\t.selectAll(\"path\")\n\t\t\t\t.data(data.links)\n\t\t\t\t.join(\"path\")\n\t\t\t\t\t.attr(\"d\", this.computePath)\n\t\t\t\t\t.attr(\"marker-end\", \"url(#arrowhead)\")\n\t\t\t\t\t.attr(\"stroke\", \"#555\")\n\t\t\t\t\t.attr(\"fill-opacity\", 0)\n\t\t\t\t\t.attr(\"opacity\", 0.1)\n\n\t\t\tthis.includeFooter(data);\n\t\t}\n\n\t\tonMouseOverNode(datum) {\n\t\t\tconst linked = new Set();\n\n\t\t\tthis.links\n\t\t\t\t.filter(d => d.source === datum || d.target === datum)\n\t\t\t\t.each(d => {\n\t\t\t\t\tlinked.add(d.source);\n\t\t\t\t\tlinked.add(d.target);\n\t\t\t\t})\n\t\t\t\t.attr(\"opacity\", 1);\n\n\t\t\tthis.nodes.filter(d => linked.has(d))\n\t\t\t\t.style(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"opacity\", 1);\n\n\t\t\tif (this.props.onMouseOverNode)\n\t\t\t\tthis.props.onMouseOverNode(datum, this.nodes, this.links);\n\t\t}\n\n\t\tonMouseOutNode() {\n\t\t\tthis.links.attr(\"opacity\", 0.1);\n\t\t\tthis.nodes\n\t\t\t\t.style(\"font-weight\", \"normal\")\n\t\t\t\t.attr(\"opacity\", 0.75);\n\n\t\t\tselect(\"#synset-tooltip\").style(\"display\", \"none\");\n\n\t\t\tif (this.props.onMouseOutNode)\n\t\t\t\tthis.props.onMouseOutNode();\n\t\t}\n\n\t\trender() {\n\t\t\tconst {store} = this.props;\n\n\t\t\treturn (\n\t\t\t\t<div ref={node => this.root = node}>\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.graphData.nodes.length > 0\n\t\t\t\t\t\t?\n\t\t\t\t\t\t\t<svg>\n\t\t\t\t\t\t\t\t<defs>\n\t\t\t\t\t\t\t\t\t<marker id=\"arrowhead\"\n\t\t\t\t\t\t\t\t\t\tmarkerWidth=\"10\" markerHeight=\"7\" \n\t\t\t\t\t\t\t\t\t\trefX=\"0\" refY=\"3.5\" orient=\"auto\">\n\t\t\t\t\t\t\t\t\t\t<polygon points=\"0 0, 10 3.5, 0 7\" fill=\"#555\" />\n\t\t\t\t\t\t\t\t\t</marker>\n\t\t\t\t\t\t\t\t</defs>\n\t\t\t\t\t\t\t\t<g id=\"nodes\" />\n\t\t\t\t\t\t\t\t<g id=\"links\" />\n\t\t\t\t\t\t\t\t<text id=\"title\" />\n\t\t\t\t\t\t\t\t<text id=\"stats\" />\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t: <h3 className=\"no-data-text\">No data to show.</h3>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t}\n);\n\nexport default TranslationGraph;","import React from 'react';\nimport {observer} from 'mobx-react';\nimport {select} from 'd3-selection';\n\nimport './SynsetGraph.css';\nimport TranslationGraph from './TranslationGraph';\n\nconst SynsetGraph = observer(\n\tclass SynsetGraph extends React.Component {\n\n\t\tposRegex = /\\.\\w{1,4}$/gi\n\n\t\tlemmaHtml(lemma, isHighlighted) {\n\t\t\tif(isHighlighted)\n\t\t\t\treturn `<span class=\"synset-lemma highlighted\">${lemma}</span>`;\n\t\t\telse\n\t\t\t\treturn `<span class=\"synset-lemma\">${lemma}</span>`;\n\t\t}\n\n\t\tonMouseOverNode = (datum, nodes, links) => {\n\t\t\tif (datum.type !== 'intermediate')\n\t\t\t\treturn;\n\n\t\t\tconst {store} = this.props;\n\t\t\tconst synset = store.synsetData[datum.name];\n\t\t\tconst language = store.language;\n\t\t\tconst highlighted = new Set();\n\n\t\t\tlinks.each(d => {\n\t\t\t\tif (d.target === datum) {\n\t\t\t\t\thighlighted.add(d.source.name.replace(this.posRegex, ''))\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tselect(\"#synset-name\").html(datum.name);\n\n\t\t\tselect(\"#synset-desc\").html(synset.definition);\n\n\t\t\tselect(\"#synset-eng-lemmas\")\n\t\t\t\t.html(synset[\"en\"].map(l => this.lemmaHtml(l, highlighted.has(l))).join(\", \"))\n\n\t\t\tselect(\"#synset-l2-title\").html(`${language}:`)\n\t\t\tselect(\"#synset-l2-lemmas\")\n\t\t\t\t.html(synset[language].map(l => this.lemmaHtml(l, highlighted.has(l))).join(\", \"))\n\n\t\t\tconst tooltip = select(\"#synset-tooltip\");\n\t\t\ttooltip.style(\"display\", \"block\");\n\t\t\tconst bbox = tooltip.node().getBoundingClientRect();\n\t\t\tlet top = datum.y + datum.height/2;\n\n\t\t\tif (datum.y + bbox.height > window.innerHeight) {\n\t\t\t\ttop = datum.y - datum.height - bbox.height;\n\t\t\t} else {\n\t\t\t\ttop = datum.y + datum.height/2;\n\t\t\t}\n\n\t\t\ttooltip\n\t\t\t\t.style(\"top\", `${top}px`)\n\t\t\t\t.style(\"left\", `${datum.x+12}px`)\n\t\t}\n\n\t\tonMouseOutNode() {\n\t\t\tselect(\"#synset-tooltip\").style(\"display\", \"none\");\n\t\t}\n\n\t\trender() {\n\t\t\tconst {store} = this.props;\n\n\t\t\treturn (\n\t\t\t\t<div ref={node => this.root = node}>\n\t\t\t\t\t<div id=\"synset-graph-content\">\n\t\t\t\t\t\t<div id=\"synset-tooltip\">\n\t\t\t\t\t\t\t<div className=\"synset-lang-title large\" id=\"synset-name\"></div>\n\t\t\t\t\t\t\t<div id=\"synset-desc\"></div>\n\t\t\t\t\t\t\t<div className=\"synset-lang-title\">eng:</div>\n\t\t\t\t\t\t\t<div id=\"synset-eng-lemmas\"></div>\n\t\t\t\t\t\t\t<div className=\"synset-lang-title\" id=\"synset-l2-title\" />\n\t\t\t\t\t\t\t<div id=\"synset-l2-lemmas\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<TranslationGraph\n\t\t\t\t\t\t\tstore={store}\n\t\t\t\t\t\t\tonMouseOverNode={this.onMouseOverNode}\n\t\t\t\t\t\t\tonMouseOutNode={this.onMouseOutNode}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n)\n\nexport default SynsetGraph;","import React from 'react';\nimport {observer} from 'mobx-react';\nimport {FaArrowLeft} from 'react-icons/fa';\nimport Sankey from './components/Sankey';\nimport SynsetGraph from './components/SynsetGraph';\nimport TranslationGraph from './components/TranslationGraph';\n\nimport './ChartPanel.css';\n\nconst ChartPanel = observer(\n\tclass ChartPanel extends React.Component {\n\n\t\tselectableTypes = [\n\t\t\t\"lu_wordnet\",\n\t\t\t\"synset\",\n\t\t\t\"synset_inv\",\n\t\t\t\"lu_muse\"\n\t\t]\n\n\t\tonBackClick() {\n\t\t\tthis.props.uiState.showAlignmentDetails = false;\n\t\t}\n\n\t\tonAlignmentClick() {\n\t\t\tconst {store,uiState} = this.props;\n\t\t\t\n\t\t\tif (this.selectableTypes.indexOf(store.alignment.type) > -1) {\n\t\t\t\tuiState.showAlignmentDetails = true\n\t\t\t}\n\t\t}\n\n\t\trender() {\n\t\t\tconst {store, uiState} = this.props;\n\t\t\tlet className = \"\";\n\n\t\t\tclassName += uiState.showAlignmentDetails ? \"shift\" : \"no-shift\";\n\t\t\tif (!uiState.sidebarOpen) className += \" expanded\";\n\t\t\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tid=\"chart-panel-container\"\n\t\t\t\t\tclassName={className} >\n\t\t\t\t\t{\n\t\t\t\t\t\tuiState.showAlignmentDetails &&\n\t\t\t\t\t\t<div id=\"back-button-container\" onClick={() => this.onBackClick()} >\n\t\t\t\t\t\t\t<FaArrowLeft size=\"1.75em\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t<Sankey\n\t\t\t\t\t\tstore={store}\n\t\t\t\t\t\tonAlignmentClick={() => this.onAlignmentClick()}\n\t\t\t\t\t/>\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.alignment && store.alignment.type === 'lu_muse'\n\t\t\t\t\t\t\t? <TranslationGraph store={store} />\n\t\t\t\t\t\t\t: <SynsetGraph store={store} />\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\t}\n)\n\nexport default ChartPanel;","import React from 'react';\n\nimport \"@kenshooui/react-multi-select/dist/style.css\";\nimport './App.css';\n\nimport Sidebar from './components/Sidebar';\nimport AlignmentStore from './stores/AligmentStore';\nimport UiState from './stores/UiState';\nimport ChartPanel from './ChartPanel';\n\nconst store = new AlignmentStore();\nconst uiState = new UiState();\n\nfunction App() {\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Sidebar store={store} uiState={uiState} />\n\t\t\t<div className=\"app-body\">\n\t\t\t\t<ChartPanel store={store} uiState={uiState} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}