{"version":3,"sources":["components/viz.js","components/Sankey.js","components/AlignmentUpload.js","components/Slider.js","components/Sidebar.js","stores/AligmentStore.js","App.js","serviceWorker.js","index.js"],"names":["viz","version","keyPrimary","keySecondary","value","width","height","orient","barSize","min","pad","data","fill","g","edgeOpacity","duration","sortPrimary","sortSecondary","edgeMode","bP","_","each","d3","this","bars","s","selectAll","subBars","enter","append","attr","d","x","y","fx","fy","fw","fh","style","e","edges","path","mainBars","on","mouseover","mouseout","arguments","length","mb","primary","secondary","key","_or","calculateMainBars","calculateSubBars","m","forEach","floorMainBars","concat","map","index","eMode","get","edgeVert","edgeHoriz","percent","x1","y1","x2","y2","x3","y3","x4","y4","join","mx1","mx3","my1","my3","calculateEdges","isSelKey","part","v","ps","sortKeys","rollup","entries","bpmap","bsize","i","push","p","values","t","a","r","ln","lp","o","b","ret","update","_data","b1","dur","transition","select","newbars","filter","Sankey","observer","container","renderSankey","store","props","window","innerHeight","remove","bp","call","text","className","ref","node","React","Component","AlignmentUpload","onFileChange","event","file","target","files","reader","FileReader","addEventListener","raw","JSON","parse","result","readAsBinaryString","type","onChange","max","step","threshold","items","frames","selected","itemHeight","wrapperClassName","AlignmentStore","selectedSet","Set","id","has","sort","label","decorate","observable","computed","App","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.153a26cd.chunk.js","sourcesContent":["import * as d3 from 'd3';\n\nvar viz = { version: \"1.1.8\" };\n\nviz.bP = function(){\n\tvar keyPrimary, keySecondary, value\n\t,width, height, orient, barSize, min, pad\n\t,data, fill, g, edgeOpacity, duration\n\t,sortPrimary, sortSecondary, edgeMode\n\t;\n\tfunction bP(_){\n\tg=_;\n\t\t\t_.each(function() {\n\t\t\t\tvar g = d3.select(this);\n\t\tvar bars = bP.bars();\n\t\n\t\tvar s = g.selectAll(\".subBars\")\n\t\t\t\t.data(bars.subBars)\n\t\t\t\t.enter()\n\t\t.append(\"g\")\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t\t\t.attr(\"class\",\"subBars\")\n\t\t\t\t.append(\"rect\")\n\t\t\t\t.attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh);\n\t\t\n\t\t\t\tif(typeof fill !==\"undefined\") s.style(\"fill\", function(d){ return fill(d); });\n\t\t\t\n\t\t\t\tvar e = g.selectAll(\".edges\")\n\t\t\t\t.data(bars.edges)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"path\")\n\t\t\t\t.attr(\"class\",\"edges\")\n\t\t\t\t.attr(\"d\",function(d){ return d.path; })\n\t\t.style(\"fill-opacity\",bP.edgeOpacity());\n\t\t\t\t\n\t\t\t\tif(typeof fill !==\"undefined\") e.style(\"fill\", function(d){ return fill(d); });\n\t\t\n\t\t\t\tg.selectAll(\".mainBars\")\n\t\t\t\t.data(bars.mainBars)\n\t\t\t\t.enter()\n\t\t.append(\"g\")\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t\t\t.attr(\"class\",\"mainBars\")\n\t\t\t\t.append(\"rect\")\n\t\t\t\t.attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh)\n\t\t.style(\"fill-opacity\",0)\n\t\t.on(\"mouseover\",bP.mouseover)\n\t\t.on(\"mouseout\",bP.mouseout);\t\t\t\n\t});\n\t}\n\tbP.data = function(_){\n\tif(!arguments.length) return data;\n\tdata = _;\n\treturn bP;\n\t}\n\tbP.fill = function(_){\n\tif(!arguments.length) return fill;\n\tfill = _;\n\treturn bP;\n\t}\n\tbP.keyPrimary = function(_){ \n\tif(!arguments.length) return typeof keyPrimary !== \"undefined\" ? keyPrimary : function(d){ return d[0]; } ;\n\tkeyPrimary = _;\n\treturn bP;\t\t\n\t}\n\tbP.sortPrimary = function(_){ \n\tif(!arguments.length) return typeof sortPrimary !== \"undefined\" ? sortPrimary : d3.ascending ;\n\tsortPrimary = _;\n\treturn bP;\t\t\n\t}\n\tbP.keySecondary = function(_){ \n\tif(!arguments.length) return typeof keySecondary !== \"undefined\" ? keySecondary : function(d){ return d[1]; };\n\tkeySecondary = _;\n\treturn bP;\t\t\n\t}\n\tbP.sortSecondary = function(_){ \n\tif(!arguments.length) return typeof sortSecondary !== \"undefined\" ? sortSecondary : d3.ascending;\n\tsortSecondary = _;\n\treturn bP;\t\t\n\t}\t  \n\tbP.value = function(_){ \n\tif(!arguments.length) return typeof value !== \"undefined\" ? value : function(d){ return d[2]; };\n\tvalue = _;\n\treturn bP;\t\t\n\t}\t  \n\tbP.width = function(_){\n\tif(!arguments.length) return typeof width !== \"undefined\" ? width : 400;\n\twidth = _;\n\treturn bP;\n\t}\n\tbP.height = function(_){\n\tif(!arguments.length) return typeof height !== \"undefined\" ? height : 600;\n\theight = _;\n\treturn bP;\n\t}\n\tbP.barSize = function(_){\n\tif(!arguments.length) return typeof barSize !== \"undefined\" ? barSize : 35;\n\tbarSize = _;\n\treturn bP;\n\t}\n\tbP.min = function(_){\n\tif(!arguments.length) return typeof min !== \"undefined\" ? min : 0;\n\tmin = _;\n\treturn bP;\n\t}\n\tbP.orient = function(_){\n\tif(!arguments.length) return typeof orient !== \"undefined\" ? orient : \"vertical\";\n\torient = _;\n\treturn bP;\n\t}\n\tbP.pad = function(_){\n\tif(!arguments.length) return typeof pad !== \"undefined\" ? pad : 0;\n\tpad = _;\n\treturn bP;\n\t}\n\tbP.duration = function(_){\n\tif(!arguments.length) return typeof duration !== \"undefined\" ? duration : 500;\n\tduration = _;\n\treturn bP;\n\t}\n\tbP.edgeOpacity = function(_){\n\tif(!arguments.length) return typeof edgeOpacity !== \"undefined\" ? edgeOpacity : .4;\n\tedgeOpacity = _;\n\treturn bP;\n\t}\n\tbP.edgeMode = function(_){\n\tif(!arguments.length) return typeof edgeMode !== \"undefined\" ? edgeMode : \"curved\";\n\tedgeMode = _;\n\treturn bP;\n\t}\n\tbP.bars = function(mb){\n\tvar mainBars={primary:[], secondary:[]};\n\tvar subBars= {primary:[], secondary:[]};\n\tvar key ={primary:bP.keyPrimary(), secondary:bP.keySecondary() };\n\tvar _or = bP.orient();\n\t\n\tcalculateMainBars(\"primary\");\n\tcalculateMainBars(\"secondary\");\t\n\tcalculateSubBars(\"primary\");\t\n\tcalculateSubBars(\"secondary\");\n\tfloorMainBars(); // ensure that main bars is atleast of size mi.n\n\t\n\treturn {\n\t\t\tmainBars:mainBars.primary.concat(mainBars.secondary)\n\t\t,subBars:subBars.primary.concat(subBars.secondary)\n\t\t,edges:calculateEdges()\n\t};\n\n\tfunction isSelKey(d, part){ \n\t\treturn (typeof mb === \"undefined\" || mb.part === part) || (key[mb.part](d) === mb.key);\n\t}\n\tfunction floorMainBars(){\n\t\tvar m =bP.min()/2;\n\t\t\n\t\tmainBars.primary.forEach(function(d){\n\t\t\tif(d.height<m) d.height=m;\n\t\t});\n\t\tmainBars.secondary.forEach(function(d){\n\t\t\tif(d.height<m) d.height=m;\n\t\t});\n\t}\n\tfunction calculateMainBars(part){\n\t\t\t;\n\t\tfunction v(d){ return isSelKey(d, part) ? bP.value()(d): 0;};\n\n\t\tvar ps = d3.nest()\n\t\t\t.key(part===\"primary\"? bP.keyPrimary():bP.keySecondary())\n\t\t\t.sortKeys(part===\"primary\"? bP.sortPrimary():bP.sortSecondary())\n\t\t\t.rollup(function(d){ return d3.sum(d,v); })\n\t\t\t.entries(bP.data())\n\t\t;\n\t\t\n\t\tvar bars = bpmap(ps, bP.pad(), bP.min(), 0, _or===\"vertical\" ? bP.height() : bP.width());\n\t\tvar bsize = bP.barSize();\n\t\tps.forEach(function(d,i){ \n\t\t\tmainBars[part].push({\n\t\t\t\t\tx:_or===\"horizontal\"? (bars[i].s+bars[i].e)/2 : (part===\"primary\" ? bsize/2 : bP.width()-bsize/2)\n\t\t\t\t,y:_or===\"vertical\"? (bars[i].s+bars[i].e)/2 : (part===\"primary\" ? bsize/2 : bP.height()-bsize/2)\n\t\t\t\t,height:_or===\"vertical\"? (bars[i].e - bars[i].s)/2 : bsize/2\n\t\t\t\t,width: _or===\"horizontal\"? (bars[i].e - bars[i].s)/2 : bsize/2\n\t\t\t\t,part:part\n\t\t\t\t,key:d.key\n\t\t\t\t,value:d.value\n\t\t\t\t,percent:bars[i].p\n\t\t\t});\n\t\t});\n\t}\n\tfunction calculateSubBars(part){\n\t\tfunction v(d){ return isSelKey(d, part) ? bP.value()(d): 0;};\n\t\t\t\t\n\t\tvar map = d3.map(mainBars[part], function(d){ return d.key});\n\t\t\n\t\tvar ps = d3.nest()\n\t\t\t.key(part===\"primary\"? bP.keyPrimary():bP.keySecondary())\n\t\t\t.sortKeys(part===\"primary\"? bP.sortPrimary():bP.sortSecondary())\n\t\t\t.key(part===\"secondary\"? bP.keyPrimary():bP.keySecondary())\n\t\t\t.sortKeys(part===\"secondary\"? bP.sortPrimary():bP.sortSecondary())\n\t\t\t.rollup(function(d){ return d3.sum(d,v); })\n\t\t\t.entries(bP.data());\n\n\t\tps.forEach(function(d){ \n\t\t\tvar g= map.get(d.key); \n\t\t\tvar bars = bpmap(d.values, 0, 0\n\t\t\t\t\t,_or===\"vertical\" ? g.y-g.height : g.x-g.width\n\t\t\t\t\t,_or===\"vertical\" ? g.y+g.height : g.x+g.width);\n\n\t\t\tvar bsize = bP.barSize();\t\t\t\n\t\t\td.values.forEach(function(t,i){ \n\t\t\t\tsubBars[part].push({\n\t\t\t\t\t\tx:_or===\"vertical\"? part===\"primary\" ? bsize/2 : bP.width()-bsize/2 : (bars[i].s+bars[i].e)/2\n\t\t\t\t\t,y:_or===\"horizontal\"? part===\"primary\" ? bsize/2 : bP.height()-bsize/2 : (bars[i].s+bars[i].e)/2\n\t\t\t\t\t,height:(_or===\"vertical\"? bars[i].e - bars[i].s : bsize)/2\n\t\t\t\t\t,width: (_or===\"horizontal\"? bars[i].e - bars[i].s : bsize)/2\n\t\t\t\t\t,part:part\n\t\t\t\t\t,primary:part===\"primary\"? d.key : t.key\n\t\t\t\t\t,secondary:part===\"primary\"? t.key : d.key\t\n\t\t\t\t\t,value:t.value\n\t\t\t\t\t,percent:bars[i].p*g.percent\n\t\t\t\t\t,index: part===\"primary\"? d.key+\"|\"+t.key : t.key+\"|\"+d.key //index \n\t\t\t\t});\n\t\t\t});\t\t  \n\t\t});\n\t}\n\tfunction calculateEdges(){\t\n\t\tvar map=d3.map(subBars.secondary,function(d){ return d.index;});\n\t\tvar eMode= bP.edgeMode();\n\t\t\n\t\treturn subBars.primary.map(function(d){\n\t\t\tvar g=map.get(d.index);\n\t\t\treturn {\n\t\t\t\t\tpath:_or === \"vertical\" \n\t\t\t\t\t? edgeVert(d.x+d.width,d.y+d.height,g.x-g.width,g.y+g.height,g.x-g.width,g.y-g.height,d.x+d.width,d.y-d.height)\n\t\t\t\t\t: edgeHoriz(d.x-d.width,d.y+d.height,g.x-g.width,g.y-g.height,g.x+g.width,g.y-g.height,d.x+d.width,d.y+d.height)\n\t\t\t\t,primary:d.primary\n\t\t\t\t,secondary:d.secondary\n\t\t\t\t,value:d.value\n\t\t\t\t,percent:d.percent\n\t\t\t}\n\t\t});\n\t\tfunction edgeVert(x1,y1,x2,y2,x3,y3,x4,y4){\n\t\t\tif(eMode===\"straight\") return [\"M\",x1,\",\",y1,\"L\",x2,\",\",y2,\"L\",x3,\",\",y3,\"L\",x4,\",\",y4,\"z\"].join(\"\")\n\t\t\tvar mx1=(x1+x2)/2,mx3=(x3+x4)/2;\n\t\t\treturn [\"M\",x1,\",\",y1,\"C\",mx1,\",\",y1,\" \",mx1,\",\",y2,\",\",x2,\",\",y2,\"L\"\n\t\t\t\t\t,x3,\",\",y3,\"C\",mx3,\",\",y3,\" \",mx3,\",\",y4,\",\",x4,\",\",y4,\"z\"].join(\"\");\n\t\t}\n\t\tfunction edgeHoriz(x1,y1,x2,y2,x3,y3,x4,y4){\n\t\t\tif(eMode===\"straight\") return [\"M\",x1,\",\",y1,\"L\",x2,\",\",y2,\"L\",x3,\",\",y3,\"L\",x4,\",\",y4,\"z\"].join(\"\")\n\t\t\tvar my1=(y1+y2)/2,my3=(y3+y4)/2;\n\t\t\treturn [\"M\",x1,\",\",y1,\"C\",x1,\",\",my1,\" \",x2,\",\",my1,\",\",x2,\",\",y2,\"L\"\n\t\t\t\t\t,x3,\",\",y3,\"C\",x3,\",\",my3,\" \",x4,\",\",my3,\",\",x4,\",\",y4,\"z\"].join(\"\");\n\t\t}\n\t}\n\tfunction bpmap(a/*array*/, p/*pad*/, m/*min*/, s/*start*/, e/*end*/){\n\t\tvar r = m/(e-s-2*a.length*p); // cut-off for ratios\n\t\tvar ln =0, lp=0, t=d3.sum(a,function(d){ return d.value;}); // left over count and percent.\n\t\ta.forEach(function(d){ if(d.value < r*t ){ ln+=1; lp+=d.value; }})\n\t\tvar o= t < 1e-5 ? 0:(e-s-2*a.length*p-ln*m)/(t-lp); // scaling factor for percent.\n\t\tvar b=s, ret=[];\n\t\ta.forEach(function(d){ \n\t\t\tvar v =d.value*o; \n\t\t\tret.push({\n\t\t\t\t\ts:b+p+(v<m?.5*(m-v): 0)\n\t\t\t\t,e:b+p+(v<m? .5*(m+v):v)\n\t\t\t\t,p:t < 1e-5? 0:d.value/t\n\t\t\t}); \n\t\t\tb+=2*p+(v<m? m:v); \n\t\t});\n\t\t\n\t\treturn ret;\n\t}\t  \n\t}\t  \n\tbP.update = function(_data){\n\t\tdata = _data;\n\tvar b1 = bP.bars();\n\tvar dur = bP.duration();\n\t\n\tg.selectAll(\".subBars\").data(b1.subBars).transition().duration(dur)\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t\t\t.select(\"rect\")\n\t\t\t\t.attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh);\n\t\t\t\t\t\t\n\t\t\tg.selectAll(\".edges\").data(b1.edges).transition().duration(dur)\n\t\t\t\t.attr(\"d\",function(d){ return d.path; })\n\t\t.style(\"fill-opacity\",bP.edgeOpacity())\n\t\t\t\t\t\n\t\t\tg.selectAll(\".mainBars\").data(b1.mainBars).transition().duration(dur)\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t\t\t.select(\"rect\")\n\t\t\t\t.attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh)\n\t\t.style(\"fill-opacity\",0)\n\t}\n\tbP.mouseover = function(d){\n\t\tvar newbars = bP.bars(d);\n\t\tg.selectAll(\".mainBars\").filter(function(r){ return r.part===d.part && r.key === d.key})\n\t\t.select(\"rect\").style(\"stroke-opacity\", 1);\n\t\t\n\t\tg.selectAll(\".subBars\").data(newbars.subBars)\n\t\t.transition().duration(bP.duration())\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t.select(\"rect\").attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh);\n\t\t\n\t\tvar e = g.selectAll(\".edges\")\n\t\t.data(newbars.edges);\n\t\t\n\t\te.filter(function(t){ return t[d.part] === d.key;})\n\t\t.transition().duration(bP.duration())\n\t\t.style(\"fill-opacity\",bP.edgeOpacity())\n\t\t.attr(\"d\",function(d){ return d.path});\t\n\t\t\n\t\te.filter(function(t){ return t[d.part] !== d.key;})\n\t\t.transition().duration(bP.duration())\n\t\t.style(\"fill-opacity\",0)\n\t\t.attr(\"d\",function(d){ return d.path});\t\n\t\t\n\t\tg.selectAll(\".mainBars\").data(newbars.mainBars)\n\t\t.transition().duration(bP.duration())\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t.select(\"rect\").attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh)\n\t}\n\tbP.mouseout = function(d){\n\t\tvar newbars = bP.bars();\n\t\t\t\t\t\n\t\tg.selectAll(\".mainBars\").filter(function(r){ return r.part===d.part && r.key === d.key})\n\t\t.select(\"rect\").style(\"stroke-opacity\", 0);\n\t\t\n\t\tg.selectAll(\".subBars\").data(newbars.subBars)\n\t\t.transition().duration(bP.duration())\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t.select(\"rect\").attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh);\n\t\t\n\t\tg.selectAll(\".edges\").data(newbars.edges)\n\t\t.transition().duration(bP.duration())\n\t\t.style(\"fill-opacity\",bP.edgeOpacity())\n\t\t.attr(\"d\",function(d){ return d.path});\t\n\t\t\n\t\tg.selectAll(\".mainBars\").data(newbars.mainBars)\n\t\t.transition().duration(bP.duration())\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t.select(\"rect\").attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh);\n\t}\n\tfunction fx(d){ return -d.width}\n\tfunction fy(d){ return -d.height}\n\t\tfunction fw(d){ return 2*d.width}\n\t\tfunction fh(d){ return 2*d.height}\n\t\n\treturn bP;\n}\t\n\nexport default viz;\n","import React from 'react';\nimport { select } from 'd3-selection';\nimport { observer } from 'mobx-react';\n// TODO: Should redo this d3 layout (it's kinda bad!)\nimport viz from './viz.js';\n\nimport './Sankey.css';\n\nconst Sankey = observer(\n\tclass Sankey extends React.Component {\n\n\t\tcontainer = null\n\n\t\tcomponentDidMount() {\n\t\t\tthis.renderSankey();\n\t\t}\n\n\t\tcomponentDidUpdate() {\n\t\t\tthis.renderSankey();\n\t\t}\n\n\t\trenderSankey() {\n\t\t\tconst {store} = this.props;\n\t\t\tconst height = window.innerHeight;\n\t\t\t\n\t\t\tconst container = select(this.container);\n\t\t\tcontainer.select(\"svg\").remove();\n\t\t\tconst svg = container.append(\"svg\").attr(\"width\", 960).attr(\"height\", height-10);\n\t\t\tconst g = svg.append(\"g\").attr(\"transform\",\"translate(200,50)\");\n\t\t\t\n\t\t\tconst bp =\n\t\t\t\tviz.bP()\n\t\t\t\t\t.data(store.data)\n\t\t\t\t\t.min(12)\n\t\t\t\t\t.pad(1)\n\t\t\t\t\t.height(height-200)\n\t\t\t\t\t.width(500)\n\t\t\t\t\t.fill(() => \"#3F51B5\")\n\t\t\t\n\t\t\tg.call(bp);\n\n\t\t\tg.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"label\")\n\t\t\t\t.attr(\"x\", d => (d.part === \"primary\" ? -30 : 30))\n\t\t\t\t.attr(\"y\", () => 6)\n\t\t\t\t.text(d => d.key)\n\t\t\t\t.attr(\"text-anchor\", d => (d.part === \"primary\" ? \"end\": \"start\"));\n\t\t}\n\n\t\trender() {\n\t\t\tconst data = this.props.store.data; // need this reference to properly react\n\n\t\t\tif (data.length === 0 ) {\n\t\t\t\treturn <h3 className=\"no-data-text\">No data to show.</h3>\n\t\t\t} else {\n\t\t\t\treturn (<div ref={node => this.container = node}></div>);\n\t\t\t}\n\t\t}\n\t}\n);\n\nexport default Sankey;","import React from 'react';\n\nclass AlignmentUpload extends React.Component {\n\tonFileChange = event => {\n\t\tconst file = event.target.files[0];\n\n\t\tif (file) {\n\t\t\tconst reader = new FileReader();\n\n\t\t\treader.addEventListener('load', e => {\n\t\t\t\t// TODO: show error messsage in case something bad happens\n\t\t\t\tthis.props.store.raw = JSON.parse(e.target.result);\n\t\t\t});\n\n\t\t\treader.readAsBinaryString(file);\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (<input type=\"file\" onChange={this.onFileChange} />)\n\t}\n}\n\nexport default AlignmentUpload;\n","import React from 'react';\nimport { observer } from 'mobx-react';\n\nimport './Slider.css';\n\nexport default observer(props => {\n\tconst {store} = props;\n\n\treturn (\n\t\t<div className=\"slider-container\">\n\t\t\t<input\n\t\t\t\ttype=\"range\"\n\t\t\t\tmin={0}\n\t\t\t\tmax={1}\n\t\t\t\tstep={0.0005}\n\t\t\t\tvalue={store.threshold}\n\t\t\t\tonChange={e => store.threshold = +e.target.value}\n\t\t\t\tclassName=\"slider\" />\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tmin={0}\n\t\t\t\tmax={1}\n\t\t\t\tstep=\"any\"\n\t\t\t\tvalue={store.threshold}\n\t\t\t\tonChange={e => store.threshold = +e.target.value}\n\t\t\t\tclassName=\"slider-text\" />\n\t\t</div>\n\t)\n})","import React from 'react';\nimport MultiSelect from \"@kenshooui/react-multi-select\";\nimport { observer } from 'mobx-react';\n\nimport './Sidebar.css';\nimport AlignmentUpload from './AlignmentUpload';\nimport Slider from './Slider';\n\nexport default observer(props => {\n\tconst {store} = props;\n\n\treturn (\n\t\t<div className=\"sidebar-container\">\n\t\t\t<h2>Alignment file</h2>\n\t\t\t<AlignmentUpload store={store} />\n\t\t\t<h2>Score threshold</h2>\n\t\t\t<Slider store={store} />\n\t\t\t<h2>Frames</h2>\n\t\t\t<MultiSelect\n\t\t\t\titems={store.frames}\n\t\t\t\tonChange={selected => store.selected = selected}\n\t\t\t\t// showSelectAll={false}\n\t\t\t\titemHeight={30}\n\t\t\t\twrapperClassName=\"multi-select-wrapper\"\n\t\t\t/>\n\t\t</div>\n\t);\n})","import { computed, decorate, observable } from 'mobx';\n\nclass AlignmentStore {\n\n\traw = []\n\n\tselected = []\n\n\tthreshold = 0.1\n\n\tget data() {\n\t\tconst selectedSet = new Set(this.selected.map(x => x.id));\n \n\t\treturn this.raw.filter(x => (selectedSet.has(x[0]) || selectedSet.has(x[1])) && x[2] >= this.threshold);\n\t}\n\n\tget frames() {\n\t\treturn [\n\t\t\t...new Set(\n\t\t\t\tthis.raw.map(x => x[0])\n\t\t\t\t\t.concat(this.raw.map(x => x[1]))\n\t\t\t)\n\t\t].sort().map(x => ({\n\t\t\tid: x,\n\t\t\tlabel: x, \n\t\t}));\n\t}\n\n}\n\ndecorate(AlignmentStore, {\n\traw: observable,\n\tselected: observable,\n\tthreshold: observable,\n\tdata: computed,\n\tframes: computed,\n})\n\nexport default AlignmentStore;","import React from 'react';\n\nimport \"@kenshooui/react-multi-select/dist/style.css\"\nimport './App.css';\n\nimport Sankey from './components/Sankey';\nimport Sidebar from './components/Sidebar';\nimport AlignmentStore from './stores/AligmentStore';\n\nconst store = new AlignmentStore()\n\nfunction App() {\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Sidebar store={store} />\n\t\t\t<div className=\"App-body\">\n\t\t\t\t<Sankey store={store} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}