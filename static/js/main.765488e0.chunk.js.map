{"version":3,"sources":["components/AlignmentUpload.js","components/Slider.js","components/Sidebar.js","stores/AligmentStore.js","components/viz.js","components/Sankey.js","components/SynsetGraph.js","ChartPanel.js","App.js","serviceWorker.js","index.js"],"names":["AlignmentUpload","props","onFileChange","event","file","target","files","reader","FileReader","addEventListener","e","error","store","load","JSON","parse","result","exception","setState","readAsBinaryString","state","this","className","type","onChange","renderError","React","Component","observer","min","max","step","value","threshold","items","frames","selected","sankeyFrames","itemHeight","wrapperClassName","AlignmentStore","alignments","indices","LUsByFrame","synsetsByLU","lemmasBySynset","alignmentIndex","showDetails","selectedEdge","action","data","fndb","db","language","lang","map","a","edges","forEach","row","i","j","push","lus","resources","lu_to_syn","syn_to_lemma","alignment","frameSet","Set","x","id","filter","has","flat","sort","label","factory","name","inDegree","outDegree","isInverseAlignment","nodes","concat","links","n","synset","source","synsetMap","l","s","isReferenceNode","frm2LU","frm1LU","isMatchingNode","decorate","observable","computed","selectionGraph","viz","version","keyPrimary","keySecondary","width","height","orient","barSize","pad","fill","g","edgeOpacity","duration","sortPrimary","sortSecondary","edgeMode","bP","_","each","d3","bars","selectAll","subBars","enter","append","attr","d","y","fx","fy","fw","fh","style","path","mainBars","arguments","length","mb","primary","secondary","key","_or","calculateMainBars","calculateSubBars","m","floorMainBars","index","eMode","get","edgeVert","edgeHoriz","percent","x1","y1","x2","y2","x3","y3","x4","y4","join","mx1","mx3","my1","my3","calculateEdges","isSelKey","part","v","ps","sortKeys","rollup","entries","bpmap","bsize","p","values","t","r","ln","lp","o","b","ret","update","_data","b1","dur","transition","select","mouseover","newbars","mouseout","colors","Sankey","root","selection","scoreFormatter","format","bPg","renderSankey","bar","unselect","edge","filterFn","text","colorGen","colorMap","reduce","res","current","next","window","innerHeight","remove","call","on","onBarClick","onEdgeClick","ref","node","SynsetGraph","tooltip","margin","posRegex","renderGraph","scalePoint","domain","range","padding","yLU1","yLU2","ySyn","frm1LUX","frm2LUX","synsetX","lemma","isHighlighted","datum","lemmas","highlighted","add","replace","html","lemmaHtml","bbox","getBoundingClientRect","top","linked","onMouseOverSynset","coef","ccoef","Math","abs","svg","synsets","matching","reference","getRenderingData","getBBox","onMouseOverNode","onMouseOutNode","computePath","includeHtml","markerWidth","markerHeight","refX","refY","points","ChartPanel","onClick","onBackClick","size","App","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.765488e0.chunk.js","sourcesContent":["import React from 'react';\n\nimport './AlignmentUpload.css';\n\nclass AlignmentUpload extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\terror: false,\n\t\t}\n\t}\n\n\tonFileChange = event => {\n\t\tconst file = event.target.files[0];\n\n\t\tif (file) {\n\t\t\tconst reader = new FileReader();\n\n\t\t\treader.addEventListener('load', e => {\n\t\t\t\tlet error = false;\n\t\t\t\tconst {store} = this.props;\n\t\t\t\ttry {\n\t\t\t\t\tstore.load(JSON.parse(e.target.result));\n\t\t\t\t} catch (exception) {\n\t\t\t\t\terror = true;\n\t\t\t\t}\n\t\t\t\tthis.setState({ error })\n\t\t\t});\n\n\t\t\treader.readAsBinaryString(file);\n\t\t}\n\t}\n\n\trenderError() {\n\t\tconst {error} = this.state;\n\t\treturn error ? <p className=\"upload-error\">Erro ao ler o arquivo.</p> : null;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<input type=\"file\" onChange={this.onFileChange} />\n\t\t\t\t{this.renderError()}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default AlignmentUpload;\n","import React from 'react';\nimport { observer } from 'mobx-react';\n\nimport './Slider.css';\n\nexport default observer(props => {\n\tconst {store} = props;\n\n\treturn (\n\t\t<div className=\"slider-container\">\n\t\t\t<input\n\t\t\t\ttype=\"range\"\n\t\t\t\tmin={0}\n\t\t\t\tmax={1}\n\t\t\t\tstep={0.0005}\n\t\t\t\tvalue={store.threshold}\n\t\t\t\tonChange={e => store.threshold = +e.target.value}\n\t\t\t\tclassName=\"slider\" />\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tmin={0}\n\t\t\t\tmax={1}\n\t\t\t\tstep=\"any\"\n\t\t\t\tvalue={store.threshold}\n\t\t\t\tonChange={e => store.threshold = +e.target.value}\n\t\t\t\tclassName=\"slider-text\" />\n\t\t</div>\n\t)\n})","import React from 'react';\nimport MultiSelect from \"@kenshooui/react-multi-select\";\nimport { observer } from 'mobx-react';\n\nimport './Sidebar.css';\nimport AlignmentUpload from './AlignmentUpload';\nimport Slider from './Slider';\n\nexport default observer(props => {\n\tconst {store} = props;\n\n\treturn (\n\t\t<div className=\"sidebar-container\">\n\t\t\t<h2>Alignment file</h2>\n\t\t\t<AlignmentUpload store={store} />\n\t\t\t<h2>Score threshold</h2>\n\t\t\t<Slider store={store} />\n\t\t\t<h2>Frames</h2>\n\t\t\t<MultiSelect\n\t\t\t\titems={store.frames}\n\t\t\t\tonChange={selected => store.sankeyFrames = selected}\n\t\t\t\titemHeight={30}\n\t\t\t\twrapperClassName=\"multi-select-wrapper\"\n\t\t\t/>\n\t\t</div>\n\t);\n})","import { action, computed, decorate, observable } from 'mobx';\n\nclass AlignmentStore {\n\n\tfndb\n\n\tlanguage\n\n\talignments = []\n\n\tindices = []\n\n\tLUsByFrame = {}\n\n\tsynsetsByLU = {}\n\n\tlemmasBySynset = {}\n\n\talignmentIndex = 0\n\n\tsankeyFrames = []\n\n\tshowDetails = false\n\n\tselectedEdge = [null, null]\n\n\tthreshold = 0.1\n\n\tget data() {\n\t\tconst alignment = this.alignments[this.alignmentIndex]\n\n\t\tif (alignment) {\n\t\t\tconst {edges} = alignment;\n\t\t\tconst frameSet = new Set(this.sankeyFrames.map(x => x.id));\n\n\t\t\treturn edges.filter(x => (frameSet.has(x[0]) || frameSet.has(x[1])) && x[2] >= this.threshold);\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}\n\n\tget frames() {\n\t\treturn this.indices\n\t\t\t.flat()\n\t\t\t.sort()\n\t\t\t.map(x => ({\n\t\t\t\tid: x,\n\t\t\t\tlabel: x\n\t\t\t}));\n\t}\n\n\tget selectionGraph() {\n\t\tconst factory = x => ({ name: x, inDegree: 0, outDegree: 0, });\n\t\tconst isInverseAlignment = this.alignments[this.alignmentIndex].type === \"synset_inv\";\n\n\t\t// LUs\n\t\tconst nodes = \n\t\t\t(this.LUsByFrame[this.selectedEdge[0]] || []).map(x => ({ type: 'frm1LU', ...factory(x) }))\n\t\t\t.concat(\n\t\t\t(this.LUsByFrame[this.selectedEdge[1]] || []).map(x => ({ type: 'frm2LU', ...factory(x) })));\n\n\t\t// LU -> synset links\n\t\tconst links = nodes\n\t\t\t.map(n =>\n\t\t\t\t(this.synsetsByLU[n.name] || [])\n\t\t\t\t\t.map(synset => ({\n\t\t\t\t\t\tsource: n,\n\t\t\t\t\t\ttarget: synset,\n\t\t\t\t\t}))\n\t\t\t)\n\t\t\t.flat();\n\n\t\t// Synsets\n\t\tconst synsetMap = {}\n\t\tnodes.push(\n\t\t\t...[...new Set(links.map(l => l.target))]\n\t\t\t\t.map(s => {\n\t\t\t\t\tconst synset = { type: 'synset', ...factory(s) };\n\t\t\t\t\tsynsetMap[s] = synset;\n\t\t\t\t\treturn synset;\n\t\t\t\t})\n\t\t)\n\n\t\tlinks.forEach(l => {\n\t\t\t// Link update to include synset object reference\n\t\t\tl.target = synsetMap[l.target];\n\t\t\t// Update degrees\n\t\t\t++l.source.outDegree;\n\t\t\t++l.target.inDegree;\n\t\t\t// Check for matching synsets\n\t\t\tl.target[l.source.type] = true;\n\t\t});\n\n\t\tnodes.forEach(n => {\n\t\t\tn.isReferenceNode = (n.frm2LU && isInverseAlignment) || (n.frm1LU && !isInverseAlignment);\n\t\t\tif (n.frm1LU && n.frm2LU) {\n\t\t\t\tn.isMatchingNode = true;\n\t\t\t}\n\n\t\t\tdelete n.frm1LU;\n\t\t\tdelete n.frm2LU;\n\t\t});\n\n\t\treturn { nodes, links };\n\t}\n\n\tload = action(data => {\n\t\tthis.fndb = data.db[1];\n\t\tthis.language = data.lang[1];\n\n\t\tthis.alignments = data.alignments.map(a => {\n\t\t\tconst edges = [];\n\n\t\t\ta.data.forEach((row, i) => {\n\t\t\t\trow.forEach((value, j) => {\n\t\t\t\t\tif (value > 0)\n\t\t\t\t\t\tedges.push([data.indices[0][i], data.indices[1][j], value])\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn { type: a.type, edges: edges }\n\t\t});\n\n\t\tthis.indices = data.indices;\n\t\tthis.LUsByFrame = data.lus;\n\t\tthis.synsetsByLU = data.resources.lu_to_syn;\n\t\tthis.lemmasBySynset = data.resources.syn_to_lemma;\n\t})\n\n}\n\ndecorate(AlignmentStore, {\n\tfndb: observable,\n\tlanguage: observable,\n\talignments: observable,\n\tindices: observable,\n\tLUsByFrame: observable,\n\tsynsetsByLU: observable,\n\tlemmasBySynset: observable,\n\talignmentIndex: observable,\n\tsankeyFrames: observable,\n\tshowDetails: observable,\n\tselectedEdge: observable,\n\tthreshold: observable,\n\tdata: computed,\n\tframes: computed,\n\tselectionGraph: computed,\n});\n\nexport default AlignmentStore;","import * as d3 from 'd3';\n\nvar viz = { version: \"1.1.8\" };\n\nviz.bP = function(){\n\tvar keyPrimary, keySecondary, value\n\t,width, height, orient, barSize, min, pad\n\t,data, fill, g, edgeOpacity, duration\n\t,sortPrimary, sortSecondary, edgeMode\n\t;\n\tfunction bP(_){\n\tg=_;\n\t\t\t_.each(function() {\n\t\t\t\tvar g = d3.select(this);\n\t\tvar bars = bP.bars();\n\t\n\t\tvar s = g.selectAll(\".subBars\")\n\t\t\t\t.data(bars.subBars)\n\t\t\t\t.enter()\n\t\t.append(\"g\")\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t\t\t.attr(\"class\",\"subBars\")\n\t\t\t\t.append(\"rect\")\n\t\t\t\t.attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh);\n\t\t\n\t\t\t\tif(typeof fill !==\"undefined\") s.style(\"fill\", function(d){ return fill(d); });\n\t\t\t\n\t\t\t\tvar e = g.selectAll(\".edges\")\n\t\t\t\t.data(bars.edges)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"path\")\n\t\t\t\t.attr(\"class\",\"edges\")\n\t\t\t\t.attr(\"d\",function(d){ return d.path; })\n\t\t.style(\"fill-opacity\",bP.edgeOpacity());\n\t\t\t\t\n\t\t\t\tif(typeof fill !==\"undefined\") e.style(\"fill\", function(d){ return fill(d); });\n\t\t\n\t\t\t\tg.selectAll(\".mainBars\")\n\t\t\t\t.data(bars.mainBars)\n\t\t\t\t.enter()\n\t\t.append(\"g\")\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t\t\t.attr(\"class\",\"mainBars\")\n\t\t\t\t.append(\"rect\")\n\t\t\t\t.attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh)\n\t\t.style(\"fill-opacity\",0)\n\t\t// .on(\"mouseover\",bP.mouseover)\n\t\t// .on(\"mouseout\",bP.mouseout);\n\t});\n\t}\n\tbP.data = function(_){\n\tif(!arguments.length) return data;\n\tdata = _;\n\treturn bP;\n\t}\n\tbP.fill = function(_){\n\tif(!arguments.length) return fill;\n\tfill = _;\n\treturn bP;\n\t}\n\tbP.keyPrimary = function(_){ \n\tif(!arguments.length) return typeof keyPrimary !== \"undefined\" ? keyPrimary : function(d){ return d[0]; } ;\n\tkeyPrimary = _;\n\treturn bP;\t\t\n\t}\n\tbP.sortPrimary = function(_){ \n\tif(!arguments.length) return typeof sortPrimary !== \"undefined\" ? sortPrimary : d3.ascending ;\n\tsortPrimary = _;\n\treturn bP;\t\t\n\t}\n\tbP.keySecondary = function(_){ \n\tif(!arguments.length) return typeof keySecondary !== \"undefined\" ? keySecondary : function(d){ return d[1]; };\n\tkeySecondary = _;\n\treturn bP;\t\t\n\t}\n\tbP.sortSecondary = function(_){ \n\tif(!arguments.length) return typeof sortSecondary !== \"undefined\" ? sortSecondary : d3.ascending;\n\tsortSecondary = _;\n\treturn bP;\t\t\n\t}\t  \n\tbP.value = function(_){ \n\tif(!arguments.length) return typeof value !== \"undefined\" ? value : function(d){ return d[2]; };\n\tvalue = _;\n\treturn bP;\t\t\n\t}\t  \n\tbP.width = function(_){\n\tif(!arguments.length) return typeof width !== \"undefined\" ? width : 400;\n\twidth = _;\n\treturn bP;\n\t}\n\tbP.height = function(_){\n\tif(!arguments.length) return typeof height !== \"undefined\" ? height : 600;\n\theight = _;\n\treturn bP;\n\t}\n\tbP.barSize = function(_){\n\tif(!arguments.length) return typeof barSize !== \"undefined\" ? barSize : 35;\n\tbarSize = _;\n\treturn bP;\n\t}\n\tbP.min = function(_){\n\tif(!arguments.length) return typeof min !== \"undefined\" ? min : 0;\n\tmin = _;\n\treturn bP;\n\t}\n\tbP.orient = function(_){\n\tif(!arguments.length) return typeof orient !== \"undefined\" ? orient : \"vertical\";\n\torient = _;\n\treturn bP;\n\t}\n\tbP.pad = function(_){\n\tif(!arguments.length) return typeof pad !== \"undefined\" ? pad : 0;\n\tpad = _;\n\treturn bP;\n\t}\n\tbP.duration = function(_){\n\tif(!arguments.length) return typeof duration !== \"undefined\" ? duration : 500;\n\tduration = _;\n\treturn bP;\n\t}\n\tbP.edgeOpacity = function(_){\n\tif(!arguments.length) return typeof edgeOpacity !== \"undefined\" ? edgeOpacity : .4;\n\tedgeOpacity = _;\n\treturn bP;\n\t}\n\tbP.edgeMode = function(_){\n\tif(!arguments.length) return typeof edgeMode !== \"undefined\" ? edgeMode : \"curved\";\n\tedgeMode = _;\n\treturn bP;\n\t}\n\tbP.bars = function(mb){\n\tvar mainBars={primary:[], secondary:[]};\n\tvar subBars= {primary:[], secondary:[]};\n\tvar key ={primary:bP.keyPrimary(), secondary:bP.keySecondary() };\n\tvar _or = bP.orient();\n\t\n\tcalculateMainBars(\"primary\");\n\tcalculateMainBars(\"secondary\");\t\n\tcalculateSubBars(\"primary\");\t\n\tcalculateSubBars(\"secondary\");\n\tfloorMainBars(); // ensure that main bars is atleast of size mi.n\n\t\n\treturn {\n\t\t\tmainBars:mainBars.primary.concat(mainBars.secondary)\n\t\t,subBars:subBars.primary.concat(subBars.secondary)\n\t\t,edges:calculateEdges()\n\t};\n\n\tfunction isSelKey(d, part){ \n\t\treturn (typeof mb === \"undefined\" || mb.part === part) || (key[mb.part](d) === mb.key);\n\t}\n\tfunction floorMainBars(){\n\t\tvar m =bP.min()/2;\n\t\t\n\t\tmainBars.primary.forEach(function(d){\n\t\t\tif(d.height<m) d.height=m;\n\t\t});\n\t\tmainBars.secondary.forEach(function(d){\n\t\t\tif(d.height<m) d.height=m;\n\t\t});\n\t}\n\tfunction calculateMainBars(part){\n\t\t\t;\n\t\tfunction v(d){ return isSelKey(d, part) ? bP.value()(d): 0;};\n\n\t\tvar ps = d3.nest()\n\t\t\t.key(part===\"primary\"? bP.keyPrimary():bP.keySecondary())\n\t\t\t.sortKeys(part===\"primary\"? bP.sortPrimary():bP.sortSecondary())\n\t\t\t.rollup(function(d){ return d3.sum(d,v); })\n\t\t\t.entries(bP.data())\n\t\t;\n\t\t\n\t\tvar bars = bpmap(ps, bP.pad(), bP.min(), 0, _or===\"vertical\" ? bP.height() : bP.width());\n\t\tvar bsize = bP.barSize();\n\t\tps.forEach(function(d,i){ \n\t\t\tmainBars[part].push({\n\t\t\t\t\tx:_or===\"horizontal\"? (bars[i].s+bars[i].e)/2 : (part===\"primary\" ? bsize/2 : bP.width()-bsize/2)\n\t\t\t\t,y:_or===\"vertical\"? (bars[i].s+bars[i].e)/2 : (part===\"primary\" ? bsize/2 : bP.height()-bsize/2)\n\t\t\t\t,height:_or===\"vertical\"? (bars[i].e - bars[i].s)/2 : bsize/2\n\t\t\t\t,width: _or===\"horizontal\"? (bars[i].e - bars[i].s)/2 : bsize/2\n\t\t\t\t,part:part\n\t\t\t\t,key:d.key\n\t\t\t\t,value:d.value\n\t\t\t\t,percent:bars[i].p\n\t\t\t});\n\t\t});\n\t}\n\tfunction calculateSubBars(part){\n\t\tfunction v(d){ return isSelKey(d, part) ? bP.value()(d): 0;};\n\t\t\t\t\n\t\tvar map = d3.map(mainBars[part], function(d){ return d.key});\n\t\t\n\t\tvar ps = d3.nest()\n\t\t\t.key(part===\"primary\"? bP.keyPrimary():bP.keySecondary())\n\t\t\t.sortKeys(part===\"primary\"? bP.sortPrimary():bP.sortSecondary())\n\t\t\t.key(part===\"secondary\"? bP.keyPrimary():bP.keySecondary())\n\t\t\t.sortKeys(part===\"secondary\"? bP.sortPrimary():bP.sortSecondary())\n\t\t\t.rollup(function(d){ return d3.sum(d,v); })\n\t\t\t.entries(bP.data());\n\n\t\tps.forEach(function(d){ \n\t\t\tvar g= map.get(d.key); \n\t\t\tvar bars = bpmap(d.values, 0, 0\n\t\t\t\t\t,_or===\"vertical\" ? g.y-g.height : g.x-g.width\n\t\t\t\t\t,_or===\"vertical\" ? g.y+g.height : g.x+g.width);\n\n\t\t\tvar bsize = bP.barSize();\t\t\t\n\t\t\td.values.forEach(function(t,i){ \n\t\t\t\tsubBars[part].push({\n\t\t\t\t\t\tx:_or===\"vertical\"? part===\"primary\" ? bsize/2 : bP.width()-bsize/2 : (bars[i].s+bars[i].e)/2\n\t\t\t\t\t,y:_or===\"horizontal\"? part===\"primary\" ? bsize/2 : bP.height()-bsize/2 : (bars[i].s+bars[i].e)/2\n\t\t\t\t\t,height:(_or===\"vertical\"? bars[i].e - bars[i].s : bsize)/2\n\t\t\t\t\t,width: (_or===\"horizontal\"? bars[i].e - bars[i].s : bsize)/2\n\t\t\t\t\t,part:part\n\t\t\t\t\t,primary:part===\"primary\"? d.key : t.key\n\t\t\t\t\t,secondary:part===\"primary\"? t.key : d.key\t\n\t\t\t\t\t,value:t.value\n\t\t\t\t\t,percent:bars[i].p*g.percent\n\t\t\t\t\t,index: part===\"primary\"? d.key+\"|\"+t.key : t.key+\"|\"+d.key //index \n\t\t\t\t});\n\t\t\t});\t\t  \n\t\t});\n\t}\n\tfunction calculateEdges(){\t\n\t\tvar map=d3.map(subBars.secondary,function(d){ return d.index;});\n\t\tvar eMode= bP.edgeMode();\n\t\t\n\t\treturn subBars.primary.map(function(d){\n\t\t\tvar g=map.get(d.index);\n\t\t\treturn {\n\t\t\t\t\tpath:_or === \"vertical\" \n\t\t\t\t\t? edgeVert(d.x+d.width,d.y+d.height,g.x-g.width,g.y+g.height,g.x-g.width,g.y-g.height,d.x+d.width,d.y-d.height)\n\t\t\t\t\t: edgeHoriz(d.x-d.width,d.y+d.height,g.x-g.width,g.y-g.height,g.x+g.width,g.y-g.height,d.x+d.width,d.y+d.height)\n\t\t\t\t,primary:d.primary\n\t\t\t\t,secondary:d.secondary\n\t\t\t\t,value:d.value\n\t\t\t\t,percent:d.percent\n\t\t\t}\n\t\t});\n\t\tfunction edgeVert(x1,y1,x2,y2,x3,y3,x4,y4){\n\t\t\tif(eMode===\"straight\") return [\"M\",x1,\",\",y1,\"L\",x2,\",\",y2,\"L\",x3,\",\",y3,\"L\",x4,\",\",y4,\"z\"].join(\"\")\n\t\t\tvar mx1=(x1+x2)/2,mx3=(x3+x4)/2;\n\t\t\treturn [\"M\",x1,\",\",y1,\"C\",mx1,\",\",y1,\" \",mx1,\",\",y2,\",\",x2,\",\",y2,\"L\"\n\t\t\t\t\t,x3,\",\",y3,\"C\",mx3,\",\",y3,\" \",mx3,\",\",y4,\",\",x4,\",\",y4,\"z\"].join(\"\");\n\t\t}\n\t\tfunction edgeHoriz(x1,y1,x2,y2,x3,y3,x4,y4){\n\t\t\tif(eMode===\"straight\") return [\"M\",x1,\",\",y1,\"L\",x2,\",\",y2,\"L\",x3,\",\",y3,\"L\",x4,\",\",y4,\"z\"].join(\"\")\n\t\t\tvar my1=(y1+y2)/2,my3=(y3+y4)/2;\n\t\t\treturn [\"M\",x1,\",\",y1,\"C\",x1,\",\",my1,\" \",x2,\",\",my1,\",\",x2,\",\",y2,\"L\"\n\t\t\t\t\t,x3,\",\",y3,\"C\",x3,\",\",my3,\" \",x4,\",\",my3,\",\",x4,\",\",y4,\"z\"].join(\"\");\n\t\t}\n\t}\n\tfunction bpmap(a/*array*/, p/*pad*/, m/*min*/, s/*start*/, e/*end*/){\n\t\tvar r = m/(e-s-2*a.length*p); // cut-off for ratios\n\t\tvar ln =0, lp=0, t=d3.sum(a,function(d){ return d.value;}); // left over count and percent.\n\t\ta.forEach(function(d){ if(d.value < r*t ){ ln+=1; lp+=d.value; }})\n\t\tvar o= t < 1e-5 ? 0:(e-s-2*a.length*p-ln*m)/(t-lp); // scaling factor for percent.\n\t\tvar b=s, ret=[];\n\t\ta.forEach(function(d){ \n\t\t\tvar v =d.value*o; \n\t\t\tret.push({\n\t\t\t\t\ts:b+p+(v<m?.5*(m-v): 0)\n\t\t\t\t,e:b+p+(v<m? .5*(m+v):v)\n\t\t\t\t,p:t < 1e-5? 0:d.value/t\n\t\t\t}); \n\t\t\tb+=2*p+(v<m? m:v); \n\t\t});\n\t\t\n\t\treturn ret;\n\t}\t  \n\t}\t  \n\tbP.update = function(_data){\n\t\tdata = _data;\n\tvar b1 = bP.bars();\n\tvar dur = bP.duration();\n\t\n\tg.selectAll(\".subBars\").data(b1.subBars).transition().duration(dur)\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t\t\t.select(\"rect\")\n\t\t\t\t.attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh);\n\t\t\t\t\t\t\n\t\t\tg.selectAll(\".edges\").data(b1.edges).transition().duration(dur)\n\t\t\t\t.attr(\"d\",function(d){ return d.path; })\n\t\t.style(\"fill-opacity\",bP.edgeOpacity())\n\t\t.style(\"visibility\", \"visible\")\n\t\t\t\t\t\n\t\t\tg.selectAll(\".mainBars\").data(b1.mainBars).transition().duration(dur)\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t\t\t.select(\"rect\")\n\t\t\t\t.attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh)\n\t\t// .style(\"fill-opacity\",0)\n\t\t.style(\"visibility\", \"hidden\")\n\t}\n\tbP.mouseover = function(d){\n\t\tvar newbars = bP.bars(d);\n\t\tg.selectAll(\".mainBars\").filter(function(r){ return r.part===d.part && r.key === d.key})\n\t\t.select(\"rect\").style(\"stroke-opacity\", 1);\n\t\t\n\t\tg.selectAll(\".subBars\").data(newbars.subBars)\n\t\t.transition().duration(bP.duration())\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t.select(\"rect\").attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh);\n\t\t\n\t\tvar e = g.selectAll(\".edges\")\n\t\t.data(newbars.edges);\n\t\t\n\t\te.filter(function(t){ return t[d.part] === d.key;})\n\t\t.transition().duration(bP.duration())\n\t\t.style(\"fill-opacity\",bP.edgeOpacity())\n\t\t.style(\"visibility\", \"visible\")\n\n\t\t.attr(\"d\",function(d){ return d.path});\t\n\t\t\n\t\te.filter(function(t){ return t[d.part] !== d.key;})\n\t\t.transition().duration(bP.duration())\n\t\t// .style(\"fill-opacity\",0)\n\t\t.style(\"visibility\", \"hidden\")\n\t\t.attr(\"d\",function(d){ return d.path});\t\n\t\t\n\t\tg.selectAll(\".mainBars\").data(newbars.mainBars)\n\t\t.transition().duration(bP.duration())\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t.select(\"rect\").attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh)\n\t}\n\tbP.mouseout = function(d){\n\t\tvar newbars = bP.bars();\n\t\t\t\t\t\n\t\tg.selectAll(\".mainBars\").filter(function(r){ return r.part===d.part && r.key === d.key})\n\t\t.select(\"rect\").style(\"stroke-opacity\", 0);\n\t\t\n\t\tg.selectAll(\".subBars\").data(newbars.subBars)\n\t\t.transition().duration(bP.duration())\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t.select(\"rect\").attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh);\n\t\t\n\t\tg.selectAll(\".edges\").data(newbars.edges)\n\t\t.transition().duration(bP.duration())\n\t\t.style(\"fill-opacity\",bP.edgeOpacity())\n\t\t.style(\"visibility\", \"visible\")\n\t\t.attr(\"d\",function(d){ return d.path});\t\n\t\t\n\t\tg.selectAll(\".mainBars\").data(newbars.mainBars)\n\t\t.transition().duration(bP.duration())\n\t\t.attr(\"transform\", function(d){ return \"translate(\"+d.x+\",\"+d.y+\")\";})\n\t\t.select(\"rect\").attr(\"x\",fx).attr(\"y\",fy).attr(\"width\",fw).attr(\"height\",fh);\n\t}\n\tfunction fx(d){ return -d.width}\n\tfunction fy(d){ return -d.height}\n\t\tfunction fw(d){ return 2*d.width}\n\t\tfunction fh(d){ return 2*d.height}\n\t\n\treturn bP;\n}\t\n\nexport default viz;\n","import React from 'react';\nimport { format } from 'd3-format';\nimport { select } from 'd3-selection';\nimport { observer } from 'mobx-react';\n// TODO: Should redo this d3 layout (it's kinda bad!)\nimport viz from './viz.js';\n\nimport './Sankey.css';\n\nconst colors = function*() {\n\tconst colors = [\n\t\t\"#3366CC\",\n\t\t\"#DC3912\",\n\t\t\"#FF9900\",\n\t\t\"#109618\",\n\t\t\"#990099\",\n\t\t\"#0099C6\"\n\t];\n\tlet index = 0;\n\n\twhile(true) {\n\t\tyield colors[index];\n\t\tindex = ++index % colors.length;\n\t}\n};\n\nconst Sankey = observer(\n\tclass Sankey extends React.Component {\n\n\t\troot = null\n\n\t\tselection = null\n\n\t\tscoreFormatter = format(\".3f\")\n\n\t\tbP = null\n\n\t\tbPg = null\n\n\t\tcomponentDidMount() {\n\t\t\tif (this.props.store.data.length > 0)\n\t\t\t\tthis.renderSankey();\n\t\t}\n\n\t\tcomponentDidUpdate() {\n\t\t\tif (this.props.store.data.length > 0)\n\t\t\t\tthis.renderSankey();\n\t\t}\n\n\t\tonBarClick(bar) {\n\t\t\tif (this.selection && this.selection.key === bar.key) {\n\t\t\t\tthis.unselect(this.selection);\n\t\t\t\tthis.selection = null;\n\t\t\t} else {\n\t\t\t\tif (this.selection) {\n\t\t\t\t\tthis.unselect(this.selection);\n\t\t\t\t}\n\t\t\t\tthis.selection = bar;\n\t\t\t\tthis.select(bar);\n\t\t\t}\n\t\t}\n\n\t\tonEdgeClick(edge) {\n\t\t\tconst {store} = this.props;\n\n\t\t\tstore.selectedEdge[0] = edge.primary;\n\t\t\tstore.selectedEdge[1] = edge.secondary;\n\t\t\tstore.showDetails = true;\n\t\t}\n\n\t\tselect(bar) {\n\t\t\tconst filterFn =\n\t\t\t\tbar.part === \"primary\"\n\t\t\t\t\t? (d => bar.key === d.primary)\n\t\t\t\t\t: (d => bar.key === d.secondary);\n\n\t\t\tthis.bP.mouseover(bar);\n\t\t\tthis.bPg.selectAll(\".score\")\n\t\t\t\t.filter(filterFn)\n\t\t\t\t.text(d => this.scoreFormatter(d.value))\n\t\t}\n\n\t\tunselect(bar) {\n\t\t\tthis.bP.mouseout(bar);\n\t\t\tthis.bPg.selectAll(\".score\").text(\"\");\n\t\t}\n\n\t\trenderSankey() {\n\t\t\tconst {store} = this.props;\n\t\t\tconst colorGen = colors();\n\t\t\tconst colorMap =\n\t\t\t\t[...new Set(store.data.map(x => x[0]))]\n\t\t\t\t\t.reduce((res, current) => {\n\t\t\t\t\t\tres[current] = colorGen.next().value;\n\t\t\t\t\t\treturn res;\n\t\t\t\t\t}, {});\n\t\t\tconst height = window.innerHeight-10;\n\t\t\tconst width = 960;\n\t\t\tconst root = select(this.root);\n\n\t\t\troot.select(\"svg\").remove();\n\t\t\tconst svg = root.append(\"svg\").attr(\"width\", width).attr(\"height\", height);\n\t\t\tconst g = svg.append(\"g\").attr(\"transform\",\"translate(200,50)\");\n\t\t\t\n\t\t\tthis.bP =\n\t\t\t\tviz.bP()\n\t\t\t\t\t.data(store.data)\n\t\t\t\t\t.min(12)\n\t\t\t\t\t.pad(1)\n\t\t\t\t\t.height(height-200)\n\t\t\t\t\t.width(500)\n\t\t\t\t\t.fill(d => colorMap[d.primary])\n\t\t\t\n\t\t\tthis.bPg = g.call(this.bP);\n\n\t\t\tthis.bPg.selectAll(\".mainBars\")\n\t\t\t\t.on(\"click\", d => this.onBarClick(d));\n\t\t\t\n\t\t\tthis.bPg.selectAll(\".edges\")\n\t\t\t\t.on(\"click\", d => this.onEdgeClick(d));\n\n\t\t\t\tthis.bPg.selectAll(\".subBars\")\n\t\t\t\t.filter(d => d.part === \"secondary\")\n\t\t\t\t.append(\"text\")\n\t\t\t\t\t.attr(\"class\", \"score\")\n\t\t\t\t\t.attr(\"x\", -58)\n\t\t\t\t\t.attr(\"y\", 6)\n\t\t\t\n\t\t\tthis.bPg.selectAll(\".mainBars\")\n\t\t\t\t.append(\"text\")\n\t\t\t\t\t.attr(\"class\",\"label\")\n\t\t\t\t\t.attr(\"x\", d => (d.part === \"primary\" ? -30 : 30))\n\t\t\t\t\t.attr(\"y\", () => 6)\n\t\t\t\t\t.text(d => d.key)\n\t\t\t\t\t.attr(\"text-anchor\", d => (d.part === \"primary\" ? \"end\": \"start\"));\n\t\t}\n\n\t\trender() {\n\t\t\tconst data = this.props.store.data;\n\n\t\t\treturn (\n\t\t\t\t<div ref={node => this.root = node}>\n\t\t\t\t\t{\n\t\t\t\t\t\tdata.length === 0\n\t\t\t\t\t\t? <h3 className=\"no-data-text\">No data to show.</h3>\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\t}\n);\n\nexport default Sankey;","import React from 'react';\nimport {observer} from 'mobx-react';\nimport {format} from 'd3-format';\nimport {select} from 'd3-selection';\nimport {scalePoint} from 'd3-scale';\n\nimport './SynsetGraph.css';\n\nconst SynsetGraph = observer(\n\tclass SynsetGraph extends React.Component {\n\n\t\troot = null\n\n\t\ttooltip = null\n\n\t\tlinks = null\n\n\t\tnodes = null\n\n\t\theight = null\n\t\t\n\t\twidth = null\n\n\t\tmargin = null\n\n\t\tposRegex = /\\.\\w{1,3}$/gi\n\n\t\tscoreFormatter = format(\".3f\")\n\n\t\tcomponentDidMount() {\n\t\t\tif (this.props.store.selectedEdge[0] && this.props.store.selectedEdge[1])\n\t\t\t\tthis.renderGraph();\n\t\t}\n\n\t\tcomponentDidUpdate() {\n\t\t\tif (this.props.store.selectedEdge[0] && this.props.store.selectedEdge[1])\n\t\t\t\tthis.renderGraph();\n\t\t}\n\n\t\tgetRenderingData() {\n\t\t\tconst {store} = this.props;\n\t\t\tconst data = store.selectionGraph;\n\t\t\t\n\t\t\tconst x =\n\t\t\t\tscalePoint()\n\t\t\t\t\t.domain(['frm1LU', 'synset', 'frm2LU'])\n\t\t\t\t\t.range([0, this.width])\n\t\t\t\t\t.padding(.3)\n\n\t\t\tconst yLU1 = scalePoint()\n\t\t\t\t.domain(data.nodes\n\t\t\t\t\t.filter(d => d.type === 'frm1LU')\n\t\t\t\t\t.sort((a, b) => b.outDegree - a.outDegree)\n\t\t\t\t\t.map(d => d.name))\n\t\t\t\t.range([this.margin*2, this.height-(this.margin*2)]);\n\n\t\t\tconst yLU2 = scalePoint()\n\t\t\t\t.domain(data.nodes\n\t\t\t\t\t\t.filter(d => d.type === 'frm2LU')\n\t\t\t\t\t\t.sort((a,b) => b.outDegree - a.outDegree)\n\t\t\t\t\t\t.map(d => d.name))\n\t\t\t\t.range([this.margin*2, this.height-(this.margin*2)]);\n\n\t\t\tconst ySyn = scalePoint()\n\t\t\t\t.domain(data.nodes\n\t\t\t\t\t.filter(d => d.type === 'synset')\n\t\t\t\t\t.sort((a, b) => b.inDegree - a.inDegree)\n\t\t\t\t\t.map(d => d.name))\n\t\t\t\t.range([this.margin, this.height-this.margin]);\n\n\t\t\tconst frm1LUX = x('frm1LU');\n\t\t\tconst frm2LUX = x('frm2LU');\n\t\t\tconst synsetX = x('synset');\n\n\t\t\tdata.nodes.forEach(d => {\n\t\t\t\tif (d.type === 'frm1LU') {\n\t\t\t\t\td.x = frm1LUX;\n\t\t\t\t\td.y = yLU1(d.name);\n\t\t\t\t} else if (d.type === 'frm2LU') {\n\t\t\t\t\td.x = frm2LUX;\n\t\t\t\t\td.y = yLU2(d.name);\n\t\t\t\t} else {\n\t\t\t\t\td.x = synsetX;\n\t\t\t\t\td.y = ySyn(d.name);\n\t\t\t\t}\n\t\t\t})\n\n\t\t\treturn {\n\t\t\t\tnodes: data.nodes,\n\t\t\t\tlinks: data.links\n\t\t\t}\n\t\t}\n\n\t\tlemmaHtml(lemma, isHighlighted) {\n\t\t\tif(isHighlighted)\n\t\t\t\treturn `<span class=\"synset-lemma highlighted\">${lemma}</span>`;\n\t\t\telse\n\t\t\t\treturn `<span class=\"synset-lemma\">${lemma}</span>`;\n\t\t}\n\n\t\tonMouseOverSynset(datum) {\n\t\t\tconst {store} = this.props;\n\t\t\tconst lemmas = store.lemmasBySynset[datum.name];\n\t\t\tconst language = store.language;\n\t\t\tconst highlighted = new Set();\n\n\t\t\tthis.links.each(d => {\n\t\t\t\tif (d.target === datum) {\n\t\t\t\t\thighlighted.add(d.source.name.replace(this.posRegex, ''))\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tselect(\"#synset-name\").html(datum.name);\n\n\t\t\tselect(\"#synset-eng-lemmas\")\n\t\t\t\t.html(lemmas[\"eng\"].map(l => this.lemmaHtml(l, highlighted.has(l))).join(\", \"))\n\n\t\t\tselect(\"#synset-l2-title\").html(`${language}:`)\n\t\t\tselect(\"#synset-l2-lemmas\")\n\t\t\t\t.html(lemmas[language].map(l => this.lemmaHtml(l, highlighted.has(l))).join(\", \"))\n\n\t\t\tconst tooltip = select(\"#synset-tooltip\");\n\t\t\ttooltip.style(\"display\", \"block\");\n\t\t\tconst bbox = tooltip.node().getBoundingClientRect();\n\t\t\tlet top = datum.y + datum.height/2;\n\n\t\t\tif (datum.y + bbox.height > window.innerHeight) {\n\t\t\t\ttop = datum.y - datum.height - bbox.height;\n\t\t\t} else {\n\t\t\t\ttop = datum.y + datum.height/2;\n\t\t\t}\n\n\t\t\ttooltip\n\t\t\t\t.style(\"top\", `${top}px`)\n\t\t\t\t.style(\"left\", `${datum.x+12}px`)\n\t\t}\n\n\t\tonMouseOverNode(datum) {\n\t\t\tconst linked = new Set();\n\n\t\t\tthis.links\n\t\t\t\t.filter(d => d.source === datum || d.target === datum)\n\t\t\t\t.each(d => {\n\t\t\t\t\tlinked.add(d.source);\n\t\t\t\t\tlinked.add(d.target);\n\t\t\t\t})\n\t\t\t\t.attr(\"opacity\", 1);\n\n\t\t\tthis.nodes.filter(d => linked.has(d))\n\t\t\t\t.style(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"opacity\", 1);\n\n\t\t\tif (datum.type === 'synset')\n\t\t\t\tthis.onMouseOverSynset(datum);\n\t\t}\n\n\t\tonMouseOutNode() {\n\t\t\tthis.links.attr(\"opacity\", 0.1);\n\t\t\tthis.nodes\n\t\t\t\t.style(\"font-weight\", \"normal\")\n\t\t\t\t.attr(\"opacity\", 0.75);\n\n\t\t\tselect(\"#synset-tooltip\").style(\"display\", \"none\");\n\t\t}\n\n\t\tcomputePath(datum) {\n\t\t\tlet coef;\n\t\t\tlet x1 = datum.source.x;\n\t\t\tlet y1 = datum.source.y - (datum.source.height/4);\n\t\t\tlet x2 = datum.target.x;\n\t\t\tlet y2 = datum.target.y - (datum.target.height/4);\n\n\t\t\tif (datum.source.type === 'frm1LU') {\n\t\t\t\tx1 += datum.source.width + 8;\n\t\t\t\tx2 -= 12;\n\t\t\t\tcoef = 1;\n\t\t\t} else {\n\t\t\t\tx1 -= 8;\n\t\t\t\tx2 += datum.target.width + 16;\n\t\t\t\tcoef = -1;\n\t\t\t}\n\n\t\t\tconst offset = 15;\n\t\t\tconst ccoef = (Math.abs(x1 - x2)-2*offset)/2.5;\n\n\t\t\treturn `\n\t\t\t\tM ${x1}            ${y1}\n\t\t\t\tL ${x1 + 3*coef}   ${y1}\n\t\t\t\tC ${x1+ccoef*coef} ${y1}, ${x2-ccoef*coef} ${y2}, ${x2+offset*-coef} ${y2}\n\t\t\t\tL ${x2}            ${y2}\n\t\t\t`;\n\t\t}\n\n\t\tincludeHtml(data) {\n\t\t\tconst svg = select(this.root).select(\"svg\");\n\t\t\tconst synsets = data.nodes.filter(d => d.type === 'synset');\n\t\t\tconst matching = synsets.filter(d => d.isMatchingNode).length;\n\t\t\tconst reference = synsets.filter(d => d.isReferenceNode && !d.isMatchingNode).length;\n\n\t\t\tif (data.nodes.length > 0) {\n\t\t\t\tsvg.select(\"#title\")\n\t\t\t\t\t.attr(\"x\", this.margin)\n\t\t\t\t\t.attr(\"y\", this.height-this.margin/2)\n\t\t\t\t\t.attr(\"class\", \"synset-graph-info\")\n\t\t\t\t\t.text(`Frames: ${this.props.store.selectedEdge[0]}, ${this.props.store.selectedEdge[1]}`)\n\n\t\t\t\tsvg.select(\"#stats\")\n\t\t\t\t\t.attr(\"x\", this.width)\n\t\t\t\t\t.attr(\"y\", this.height-this.margin/2)\n\t\t\t\t\t.attr(\"class\", \"synset-graph-info synset-graph-score\")\n\t\t\t\t\t.html(`\n\t\t\t\t\t\tAlignment score:\n\t\t\t\t\t\t<tspan class=\"synset-matches\">${matching}</tspan>\n\t\t\t\t\t\t÷\n\t\t\t\t\t\t(\n\t\t\t\t\t\t<tspan class=\"synset-matches\">${matching}</tspan>\n\t\t\t\t\t\t+\n\t\t\t\t\t\t<tspan class=\"synset-references\">${reference}</tspan>\n\t\t\t\t\t\t)\n\t\t\t\t\t\t= ${this.scoreFormatter(matching/(matching + reference))}`)\n\t\t\t}\n\t\t}\n\n\t\trenderGraph() {\n\t\t\tthis.height = window.innerHeight-10;\n\t\t\tthis.width = 960;\n\t\t\tthis.margin = 60;\n\n\t\t\tconst data = this.getRenderingData();\n\t\t\tconst svg = select(this.root).select(\"svg\");\n\n\t\t\tsvg\n\t\t\t\t.attr(\"height\", this.height)\n\t\t\t\t.attr(\"width\", this.width);\n\n\t\t\tthis.nodes = svg.select(\"#nodes\")\n\t\t\t\t.selectAll(\"text\")\n\t\t\t\t.data(data.nodes)\n\t\t\t\t.join(\"text\")\n\t\t\t\t\t.text(d => d.name)\n\t\t\t\t\t.each(function(d) {\n\t\t\t\t\t\tconst bbox = this.getBBox();\n\t\t\t\t\t\td.width = bbox.width;\n\t\t\t\t\t\td.height = bbox.height + 2;\n\t\t\t\t\t})\n\t\t\t\t\t.attr(\"x\", d => d.x)\n\t\t\t\t\t.attr(\"y\", d => d.y)\n\t\t\t\t\t.attr(\"class\", d => {\n\t\t\t\t\t\tlet name = \"synset-node\";\n\t\t\t\t\t\tif (d.isMatchingNode) {\n\t\t\t\t\t\t\tname += \" match\";\n\t\t\t\t\t\t} else if (d.isReferenceNode) {\n\t\t\t\t\t\t\tname += \" ref\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn name;\n\t\t\t\t\t})\n\t\t\t\t\t.attr(\"opacity\", 0.75)\n\t\t\t\t\t.on(\"mouseover\", d => this.onMouseOverNode(d))\n\t\t\t\t\t.on(\"mouseout\", d => this.onMouseOutNode(d))\n\n\t\t\tthis.links = svg.select(\"#links\")\n\t\t\t\t.selectAll(\"path\")\n\t\t\t\t.data(data.links)\n\t\t\t\t.join(\"path\")\n\t\t\t\t\t.attr(\"d\", this.computePath)\n\t\t\t\t\t.attr(\"marker-end\", \"url(#arrowhead)\")\n\t\t\t\t\t.attr(\"stroke\", \"#555\")\n\t\t\t\t\t.attr(\"fill-opacity\", 0)\n\t\t\t\t\t.attr(\"opacity\", 0.1)\n\n\t\t\tthis.includeHtml(data);\n\t\t}\n\n\t\trender() {\n\t\t\tconst {store} = this.props;\n\n\t\t\treturn (\n\t\t\t\t<div ref={node => this.root = node}>\n\t\t\t\t\t<div id=\"synset-graph-content\">\n\t\t\t\t\t\t<div id=\"synset-tooltip\">\n\t\t\t\t\t\t\t<div className=\"synset-lang-title large\" id=\"synset-name\"></div>\n\t\t\t\t\t\t\t<div className=\"synset-lang-title\">eng:</div>\n\t\t\t\t\t\t\t<div id=\"synset-eng-lemmas\"></div>\n\t\t\t\t\t\t\t<div className=\"synset-lang-title\" id=\"synset-l2-title\" />\n\t\t\t\t\t\t\t<div id=\"synset-l2-lemmas\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t(store.selectedEdge[0] && store.selectedEdge[1])\n\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t\t<svg>\n\t\t\t\t\t\t\t\t\t<defs>\n\t\t\t\t\t\t\t\t\t\t<marker id=\"arrowhead\" markerWidth=\"10\" markerHeight=\"7\" \n\t\t\t\t\t\t\t\t\t\t\trefX=\"0\" refY=\"3.5\" orient=\"auto\">\n\t\t\t\t\t\t\t\t\t\t\t<polygon points=\"0 0, 10 3.5, 0 7\" fill=\"#555\" />\n\t\t\t\t\t\t\t\t\t\t</marker>\n\t\t\t\t\t\t\t\t\t</defs>\n\t\t\t\t\t\t\t\t\t<g id=\"nodes\" />\n\t\t\t\t\t\t\t\t\t<g id=\"links\" />\n\t\t\t\t\t\t\t\t\t<text id=\"title\" />\n\t\t\t\t\t\t\t\t\t<text id=\"stats\" />\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t: <h3 className=\"no-data-text\">No data to show.</h3>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n)\n\nexport default SynsetGraph;","import React from 'react';\nimport {observer} from 'mobx-react';\nimport {FaArrowLeft} from 'react-icons/fa';\nimport Sankey from './components/Sankey';\nimport SynsetGraph from './components/SynsetGraph';\n\nimport './ChartPanel.css';\n\nconst ChartPanel = observer(\n\tclass ChartPanel extends React.Component {\n\n\t\tonBackClick() {\n\t\t\tthis.props.store.showDetails = false;\n\t\t}\n\n\t\trender() {\n\t\t\tconst {store} = this.props;\n\t\t\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tid=\"chart-panel-container\"\n\t\t\t\t\tclassName={store.showDetails ? \"shift\" : \"no-shift\"} >\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.showDetails &&\n\t\t\t\t\t\t<div id=\"back-button-container\" onClick={() => this.onBackClick()} >\n\t\t\t\t\t\t\t<FaArrowLeft size=\"1.75em\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t<Sankey store={store} />\n\t\t\t\t\t<SynsetGraph store={store} />\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\t}\n)\n\nexport default ChartPanel;","import React from 'react';\n\nimport \"@kenshooui/react-multi-select/dist/style.css\"\nimport './App.css';\n\nimport Sidebar from './components/Sidebar';\nimport AlignmentStore from './stores/AligmentStore';\nimport ChartPanel from './ChartPanel';\n\nconst store = new AlignmentStore()\n\nfunction App() {\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Sidebar store={store} />\n\t\t\t<div className=\"app-body\">\n\t\t\t\t<ChartPanel store={store} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}