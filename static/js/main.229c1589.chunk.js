(this["webpackJsonpfnalign-visualizer"]=this["webpackJsonpfnalign-visualizer"]||[]).push([[0],{42:function(t,e,r){t.exports=r(57)},47:function(t,e,r){},49:function(t,e,r){},53:function(t,e,r){},55:function(t,e,r){},56:function(t,e,r){},57:function(t,e,r){"use strict";r.r(e);var n=r(0),a=r.n(n),i=r(6),o=r.n(i),u=(r(47),r(48),r(49),r(21)),c=r(7),s=r(8),l=r(22),d=r(16),f=r(23),h=r(26),y=r.n(h),p=r(15),m=r(62),g=r(9),v=r(3),w={version:"1.1.8",bP:function(){var t,e,r,n,a,i,o,u,c,s,l,d,f,h,y,p,m;function g(t){d=t,t.each((function(){var t=v.d(this),e=g.bars(),r=t.selectAll(".subBars").data(e.subBars).enter().append("g").attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).attr("class","subBars").append("rect").attr("x",w).attr("y",k).attr("width",b).attr("height",x);"undefined"!==typeof l&&r.style("fill",(function(t){return l(t)}));var n=t.selectAll(".edges").data(e.edges).enter().append("path").attr("class","edges").attr("d",(function(t){return t.path})).style("fill-opacity",g.edgeOpacity());"undefined"!==typeof l&&n.style("fill",(function(t){return l(t)})),t.selectAll(".mainBars").data(e.mainBars).enter().append("g").attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).attr("class","mainBars").append("rect").attr("x",w).attr("y",k).attr("width",b).attr("height",x).style("fill-opacity",0).on("mouseover",g.mouseover).on("mouseout",g.mouseout)}))}function w(t){return-t.width}function k(t){return-t.height}function b(t){return 2*t.width}function x(t){return 2*t.height}return g.data=function(t){return arguments.length?(s=t,g):s},g.fill=function(t){return arguments.length?(l=t,g):l},g.keyPrimary=function(e){return arguments.length?(t=e,g):"undefined"!==typeof t?t:function(t){return t[0]}},g.sortPrimary=function(t){return arguments.length?(y=t,g):"undefined"!==typeof y?y:v.a},g.keySecondary=function(t){return arguments.length?(e=t,g):"undefined"!==typeof e?e:function(t){return t[1]}},g.sortSecondary=function(t){return arguments.length?(p=t,g):"undefined"!==typeof p?p:v.a},g.value=function(t){return arguments.length?(r=t,g):"undefined"!==typeof r?r:function(t){return t[2]}},g.width=function(t){return arguments.length?(n=t,g):"undefined"!==typeof n?n:400},g.height=function(t){return arguments.length?(a=t,g):"undefined"!==typeof a?a:600},g.barSize=function(t){return arguments.length?(o=t,g):"undefined"!==typeof o?o:35},g.min=function(t){return arguments.length?(u=t,g):"undefined"!==typeof u?u:0},g.orient=function(t){return arguments.length?(i=t,g):"undefined"!==typeof i?i:"vertical"},g.pad=function(t){return arguments.length?(c=t,g):"undefined"!==typeof c?c:0},g.duration=function(t){return arguments.length?(h=t,g):"undefined"!==typeof h?h:500},g.edgeOpacity=function(t){return arguments.length?(f=t,g):"undefined"!==typeof f?f:.4},g.edgeMode=function(t){return arguments.length?(m=t,g):"undefined"!==typeof m?m:"curved"},g.bars=function(t){var e={primary:[],secondary:[]},r={primary:[],secondary:[]},n={primary:g.keyPrimary(),secondary:g.keySecondary()},a=g.orient();return o("primary"),o("secondary"),u("primary"),u("secondary"),function(){var t=g.min()/2;e.primary.forEach((function(e){e.height<t&&(e.height=t)})),e.secondary.forEach((function(e){e.height<t&&(e.height=t)}))}(),{mainBars:e.primary.concat(e.secondary),subBars:r.primary.concat(r.secondary),edges:function(){var t=v.b(r.secondary,(function(t){return t.index})),e=g.edgeMode();return r.primary.map((function(e){var r=t.get(e.index);return{path:"vertical"===a?n(e.x+e.width,e.y+e.height,r.x-r.width,r.y+r.height,r.x-r.width,r.y-r.height,e.x+e.width,e.y-e.height):i(e.x-e.width,e.y+e.height,r.x-r.width,r.y-r.height,r.x+r.width,r.y-r.height,e.x+e.width,e.y+e.height),primary:e.primary,secondary:e.secondary,value:e.value,percent:e.percent}}));function n(t,r,n,a,i,o,u,c){if("straight"===e)return["M",t,",",r,"L",n,",",a,"L",i,",",o,"L",u,",",c,"z"].join("");var s=(t+n)/2,l=(i+u)/2;return["M",t,",",r,"C",s,",",r," ",s,",",a,",",n,",",a,"L",i,",",o,"C",l,",",o," ",l,",",c,",",u,",",c,"z"].join("")}function i(t,r,n,a,i,o,u,c){if("straight"===e)return["M",t,",",r,"L",n,",",a,"L",i,",",o,"L",u,",",c,"z"].join("");var s=(r+a)/2,l=(o+c)/2;return["M",t,",",r,"C",t,",",s," ",n,",",s,",",n,",",a,"L",i,",",o,"C",i,",",l," ",u,",",l,",",u,",",c,"z"].join("")}}()};function i(e,r){return"undefined"===typeof t||t.part===r||n[t.part](e)===t.key}function o(t){function r(e){return i(e,t)?g.value()(e):0}var n=v.c().key("primary"===t?g.keyPrimary():g.keySecondary()).sortKeys("primary"===t?g.sortPrimary():g.sortSecondary()).rollup((function(t){return v.e(t,r)})).entries(g.data()),o=c(n,g.pad(),g.min(),0,"vertical"===a?g.height():g.width()),u=g.barSize();n.forEach((function(r,n){e[t].push({x:"horizontal"===a?(o[n].s+o[n].e)/2:"primary"===t?u/2:g.width()-u/2,y:"vertical"===a?(o[n].s+o[n].e)/2:"primary"===t?u/2:g.height()-u/2,height:"vertical"===a?(o[n].e-o[n].s)/2:u/2,width:"horizontal"===a?(o[n].e-o[n].s)/2:u/2,part:t,key:r.key,value:r.value,percent:o[n].p})}))}function u(t){function n(e){return i(e,t)?g.value()(e):0}var o=v.b(e[t],(function(t){return t.key}));v.c().key("primary"===t?g.keyPrimary():g.keySecondary()).sortKeys("primary"===t?g.sortPrimary():g.sortSecondary()).key("secondary"===t?g.keyPrimary():g.keySecondary()).sortKeys("secondary"===t?g.sortPrimary():g.sortSecondary()).rollup((function(t){return v.e(t,n)})).entries(g.data()).forEach((function(e){var n=o.get(e.key),i=c(e.values,0,0,"vertical"===a?n.y-n.height:n.x-n.width,"vertical"===a?n.y+n.height:n.x+n.width),u=g.barSize();e.values.forEach((function(o,c){r[t].push({x:"vertical"===a?"primary"===t?u/2:g.width()-u/2:(i[c].s+i[c].e)/2,y:"horizontal"===a?"primary"===t?u/2:g.height()-u/2:(i[c].s+i[c].e)/2,height:("vertical"===a?i[c].e-i[c].s:u)/2,width:("horizontal"===a?i[c].e-i[c].s:u)/2,part:t,primary:"primary"===t?e.key:o.key,secondary:"primary"===t?o.key:e.key,value:o.value,percent:i[c].p*n.percent,index:"primary"===t?e.key+"|"+o.key:o.key+"|"+e.key})}))}))}function c(t,e,r,n,a){var i=r/(a-n-2*t.length*e),o=0,u=0,c=v.e(t,(function(t){return t.value}));t.forEach((function(t){t.value<i*c&&(o+=1,u+=t.value)}));var s=c<1e-5?0:(a-n-2*t.length*e-o*r)/(c-u),l=n,d=[];return t.forEach((function(t){var n=t.value*s;d.push({s:l+e+(n<r?.5*(r-n):0),e:l+e+(n<r?.5*(r+n):n),p:c<1e-5?0:t.value/c}),l+=2*e+(n<r?r:n)})),d}},g.update=function(t){s=t;var e=g.bars(),r=g.duration();d.selectAll(".subBars").data(e.subBars).transition().duration(r).attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).select("rect").attr("x",w).attr("y",k).attr("width",b).attr("height",x),d.selectAll(".edges").data(e.edges).transition().duration(r).attr("d",(function(t){return t.path})).style("fill-opacity",g.edgeOpacity()),d.selectAll(".mainBars").data(e.mainBars).transition().duration(r).attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).select("rect").attr("x",w).attr("y",k).attr("width",b).attr("height",x).style("fill-opacity",0)},g.mouseover=function(t){var e=g.bars(t);d.selectAll(".mainBars").filter((function(e){return e.part===t.part&&e.key===t.key})).select("rect").style("stroke-opacity",1),d.selectAll(".subBars").data(e.subBars).transition().duration(g.duration()).attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).select("rect").attr("x",w).attr("y",k).attr("width",b).attr("height",x);var r=d.selectAll(".edges").data(e.edges);r.filter((function(e){return e[t.part]===t.key})).transition().duration(g.duration()).style("fill-opacity",g.edgeOpacity()).attr("d",(function(t){return t.path})),r.filter((function(e){return e[t.part]!==t.key})).transition().duration(g.duration()).style("fill-opacity",0).attr("d",(function(t){return t.path})),d.selectAll(".mainBars").data(e.mainBars).transition().duration(g.duration()).attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).select("rect").attr("x",w).attr("y",k).attr("width",b).attr("height",x)},g.mouseout=function(t){var e=g.bars();d.selectAll(".mainBars").filter((function(e){return e.part===t.part&&e.key===t.key})).select("rect").style("stroke-opacity",0),d.selectAll(".subBars").data(e.subBars).transition().duration(g.duration()).attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).select("rect").attr("x",w).attr("y",k).attr("width",b).attr("height",x),d.selectAll(".edges").data(e.edges).transition().duration(g.duration()).style("fill-opacity",g.edgeOpacity()).attr("d",(function(t){return t.path})),d.selectAll(".mainBars").data(e.mainBars).transition().duration(g.duration()).attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).select("rect").attr("x",w).attr("y",k).attr("width",b).attr("height",x)},g}},k=w,b=(r(53),y.a.mark((function(){var t,e;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=["#3366CC","#DC3912","#FF9900","#109618","#990099","#0099C6"],e=0;case 2:return r.next=5,t[e];case 5:e=++e%t.length,r.next=2;break;case 8:case"end":return r.stop()}}),t)}))),x=Object(g.a)(function(t){function e(){var t,r;Object(c.a)(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(a)))).container=null,r}return Object(f.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this.renderSankey()}},{key:"componentDidUpdate",value:function(){this.renderSankey()}},{key:"renderSankey",value:function(){var t=this.props.store,e=b(),r=Object(u.a)(new Set(t.data.map((function(t){return t[0]})))).reduce((function(t,r){return t[r]=e.next().value,t}),{}),n=Object(p.a)(".3f"),a=window.innerHeight,i=Object(m.a)(this.container);i.select("svg").remove();var o=i.append("svg").attr("width",960).attr("height",a-10).append("g").attr("transform","translate(200,50)"),c=k.bP().data(t.data).min(12).pad(1).height(a-200).width(500).fill((function(t){return r[t.primary]})),s=o.call(c);s.selectAll(".mainBars").on("mouseover",(function(t){var e="primary"===t.part?function(e){return t.key===e.primary}:function(e){return t.key===e.secondary};c.mouseover(t),s.selectAll(".score").filter(e).text((function(t){return n(t.value)}))})).on("mouseout",(function(t){c.mouseout(t),s.selectAll(".score").text("")})),s.selectAll(".subBars").filter((function(t){return"secondary"===t.part})).append("text").attr("class","score").attr("x",-58).attr("y",6),o.selectAll(".mainBars").append("text").attr("class","label").attr("x",(function(t){return"primary"===t.part?-30:30})).attr("y",(function(){return 6})).text((function(t){return t.key})).attr("text-anchor",(function(t){return"primary"===t.part?"end":"start"}))}},{key:"render",value:function(){var t=this;return 0===this.props.store.data.length?a.a.createElement("h3",{className:"no-data-text"},"No data to show."):a.a.createElement("div",{ref:function(e){return t.container=e}})}}]),e}(a.a.Component)),B=r(34),E=r.n(B),O=(r(55),function(t){function e(){var t,r;Object(c.a)(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(a)))).onFileChange=function(t){var e=t.target.files[0];if(e){var n=new FileReader;n.addEventListener("load",(function(t){r.props.store.raw=JSON.parse(t.target.result)})),n.readAsBinaryString(e)}},r}return Object(f.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return a.a.createElement("input",{type:"file",onChange:this.onFileChange})}}]),e}(a.a.Component)),A=(r(56),Object(g.a)((function(t){var e=t.store;return a.a.createElement("div",{className:"slider-container"},a.a.createElement("input",{type:"range",min:0,max:1,step:5e-4,value:e.threshold,onChange:function(t){return e.threshold=+t.target.value},className:"slider"}),a.a.createElement("input",{type:"number",min:0,max:1,step:"any",value:e.threshold,onChange:function(t){return e.threshold=+t.target.value},className:"slider-text"}))}))),j=Object(g.a)((function(t){var e=t.store;return a.a.createElement("div",{className:"sidebar-container"},a.a.createElement("h2",null,"Alignment file"),a.a.createElement(O,{store:e}),a.a.createElement("h2",null,"Score threshold"),a.a.createElement(A,{store:e}),a.a.createElement("h2",null,"Frames"),a.a.createElement(E.a,{items:e.frames,onChange:function(t){return e.selected=t},itemHeight:30,wrapperClassName:"multi-select-wrapper"}))})),S=r(1),C=function(){function t(){Object(c.a)(this,t),this.raw=[],this.selected=[],this.threshold=.1}return Object(s.a)(t,[{key:"data",get:function(){var t=this,e=new Set(this.selected.map((function(t){return t.id})));return this.raw.filter((function(r){return(e.has(r[0])||e.has(r[1]))&&r[2]>=t.threshold})).sort()}},{key:"frames",get:function(){return Object(u.a)(new Set(this.raw.map((function(t){return t[0]})).concat(this.raw.map((function(t){return t[1]}))))).sort().map((function(t){return{id:t,label:t}}))}}]),t}();Object(S.g)(C,{raw:S.l,selected:S.l,threshold:S.l,data:S.d,frames:S.d});var z=new C;var P=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(j,{store:z}),a.a.createElement("div",{className:"App-body"},a.a.createElement(x,{store:z})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.229c1589.chunk.js.map